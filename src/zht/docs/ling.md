# 靈明輸入法

::: warning 注意

本方案基於宇浩拆分，爲 25 鍵、前綴、四碼、三編、音托、全字集、繁簡通打輸入方案。本方案同傳統定長方案輸入體驗有所不同，請務必充分瞭解、分析、平衡其風險和收益後再決定是否學習使用。

:::

## 簡介

<u>靈明輸入法</u>，又稱<u>靈碼</u>，基於<u>宇浩拆分</u>設計製作，是繼<u>日月輸入法</u>後的另一款**純形前綴碼**方案，可完全離開空格鍵進行輸入。其名源自<span style="text-decoration: wavy underline;">尚書大傳</span>之「明明上天」「配天之靈」。

其目的是在保留<u>日月</u>前綴碼優勢的同時，壓縮最大碼長。同時，引入<u>光華</u>純二十五鍵佈局、<u>星陳</u>聚類經驗、卿雲<u>完全音托</u>的優點，讓前綴碼方案更加適合普通用戶。在設置 75 個無空格簡碼的情況下，其碼長壓縮至 3.0 左右，超過傳統四碼定長方案。

## 字根的編碼

每個字根，有大碼、小碼、補碼。部分字根沒有小碼。

1. **大碼**是要重點記憶的。部分字形近似的字根，大碼是相同的。大碼使用`BCDFGHJKLMNPQRSTVWXY`等20個輔音按鍵。
2. **小碼**，嚴格取用漢語拼音聲母，故而又稱為**聲碼**。沒有讀音的字根，永遠沒有小碼。零聲母的四個字根「而二儿耳」，用j來作為小碼。因為本輸入法不使用z鍵，故而z和zh兩個聲母用v代替。小碼使用`BCDFGHJKLMNPQRSTVWXY`等20個輔音按鍵。
3. **補碼**，嚴格取用漢語拼音主韻母，即介音後的第一個字母，故而又稱為**韻碼**。補碼使用`AEIOU`等5個元音按鍵。沒有讀音的字根，補碼永遠為`o`。

因為小碼和補碼是字根的漢語拼音**嚴格對應**的，屬於經驗性知識，故而記憶的重點應放在大碼上。

## 單字的編碼

一個字，最多取用四個字根：第一根、第二根、第三根、第四根。同時，一個字，最多是四個字母。我們使用填格子的方法將字根的編碼組合成單字編碼：☐☐☐☐

1. 首先，填入第一根大碼、和小碼（若有）。☑☐☐☐或☑☑☐☐
2. 接着，填入第二根大碼。☑☑☐☐或☑☑☑☐
3. 此時，如果還空餘兩格，則填入第三根大碼。☑☑☑☐
4. 最後，填入最未根大碼。☑☑☑☑

對於不到四個字根的字，這時候很有可能格子還未填滿，則進行以下補齊步驟：

1. 填入最未根小碼（若有）。
1. 填入最未根補碼。

由此可見：

1. 一個四根字，如果首根有小碼的，則永遠不會用到第三根。
2. 補碼只在不足四碼時用於補齊。
3. 格子填滿或者出現了補碼，這個字的編碼就結束了。

注意到，**大碼**和**小碼**所在的鍵位（輔音字母）同**補碼**所在的鍵位（元音字母）互斥，故而補碼可作爲單字的自然分隔符。不滿四碼時，不用空格也可進行連續輸入。

本方案可以實現**繁簡通打**，其關鍵數據如下：

- GB2312 重碼字數 403
- 通規重碼字數 504
- 國字常用字重碼數 76
- 簡體動態選重率 0.0455%
- 繁體動態選重率 0.0460%
- 繁簡混合動態選重率 0.0802%
- 全碼速度當量 1.287

詳見[宇浩測評網 https://ceping.shurufa.app](https://ceping.shurufa.app) 及 [《常見輸入法重碼數據》](./statistics.md)。

由於按鍵需要分爲互不重合的A區和B區，實際編碼空間數量為：$Y &= A^4 + A^3B + A^2B + AB$。其中，A區按鍵數量爲20（輔音字母），B區按鍵數量爲5（元音字母）。計算可得編碼空間為 202100（二十萬左右），是傳統四碼定長方案的一半左右。

<script setup>
import ZigenMap from "@/zigen/ZigenMap.vue"
</script>
<ZigenMap :default-scheme="'ling'" :column-min-width="'1.0rem'" />

## 對比

這裡展示靈明方案其他形碼輸入法的對比：

### 日月輸入法

相同點：都是全字集、繁簡通打。字根都是要麼兩碼要麼三碼。

不同點：日月的字根聲碼韻碼是根據實際讀音映射的，有沒有聲碼會根據讀音產生。而靈明的聲碼韻碼嚴格取拼音聲韻部分的第一字母，取不取聲碼需要特殊記憶。

### 鄭碼輸入法

相同點：都是字根雙編碼或三編碼，首根都可能取到兩碼。

不同點：鄭碼首根可能取到三碼；靈明最多取兩碼。鄭碼當主根多取一碼的時候，會少取第二根；靈明當主根多取一碼的時候，會少取第三根。鄭碼的主根后需要補`A`並且加空格上屏；靈明的補碼（韻碼）同時起到了補充和上屏的作用。

### 真碼輸入法

相同點：首根都可能取到兩碼。當主根多取一碼的時候，都會少取第三根。

不同點：真碼的主根后需要補`I`並且加空格上屏；靈明的補碼（韻碼）同時起到了補充和上屏的作用。

## 簡碼和碼長

簡碼（此處以簡體方案為例）設置如下：

- 一碼上屏字，5個：的E、是I、我O、不U、了A。
- 兩碼上屏字，70個：取首碼和末根韻碼或空格。等效一級簡碼。
- 三碼上屏字若干。等效二級簡碼。
- 簡詞：部分一碼或二碼加空格。

本方案是前綴碼，因此簡碼效率顯著高於一般的四碼定長方案，簡碼設置的**邊際效率**相對更高。綜上所述，在記憶75個無空格簡碼的情況下，單字平均碼長約爲3。

## 詞語的編碼

詞語編碼規則和其他傳統四碼定長方案類似，祇有一點不同：兩字詞中，如果首根沒有小碼（聲碼），不參與組詞。

- 兩字詞：首字前兩碼 + 次字前兩碼。注意，首字爲字根的，不設置詞語編碼。
- 三字詞：首字第一碼 + 次字第一碼 + 第三字前兩碼。
- 四字及以上詞：首字第一碼 + 次字第一碼 + 第三字第一碼 + 最末字第一碼。

## 難度

|            | 更易        |             |             | 更難        |
| ---------- | ----------- | ----------- | ----------- | ----------- |
| 大碼       | 星陳        | 光華 ~ 靈明 | 日月        | 卿雲        |
| 小碼(聲韻) | 卿雲 ~ 靈明 | 星陳        | 日月        | 光華        |
| 流暢度     | 卿雲        | 日月        | 靈明        | 星陳 ~ 光華 |
| 手感       | 日月        | 卿雲        | 靈明 ~ 星陳 | 光華        |
| 簡碼效率   | 靈明        | 日月        | 星陳 ~ 光華 | 卿雲        |

## Q&A

### 為什麼不用 Z 鍵？

因為很多傳統的大廠輸入法掛載自定義碼表時使用的是五筆字形的配置，Z鍵被佔用作爲通配符等，導致Z鍵無法使用。因此，本方案繼承光華的特性，不使用Z鍵。

又，星陳輸入法獨創了25.5鍵模式，Z鍵不作為開頭，使得其可以用來引導反查。在前綴碼中，Z鍵只可能作為聲碼存在，但出現的次數有限，省略Z鍵對性能優化影響不大。

又，由於本方案小碼絕對音托，導致Q鍵和A鍵頻率較高，因此不再在Z鍵上放置常用字根，避免左手小指負擔過重。

### 為什麼零聲母的聲碼是 J

本方案採取絕對音托，因此零聲母字根祇有四個「而二儿耳」，它們的韻碼都是 E，在左側。為了手感考慮，聲碼必須選擇右手的字母。而右手的字母中，J 是唯一近似元音的，且手感最佳。

至於為什麼不能直接將它們設為零聲母，是因為這樣的話這四個字都必然佔用寶貴的二碼上屏碼位。

同時，實際優化下來，這四個字根没有一個被算法安排為跳過聲碼，側面说明从離散角度上來說，它們有一個聲碼是比較好的。

### 為什麼沒有讀音的字根不取聲碼且補碼永遠是 O

沒有讀音的字根，表示為一個大碼加一個類似空集符號的補碼 O 最為自然，符合直覺。

同時，沒有讀音的字根，較少出現在首根上，因此不取聲碼可以更多照顧到第三根的使用率，增加離散度。

同時，沒有讀音的字根，只在特殊情況下使用，不會佔用寶貴的二碼上屏碼位，因此不取聲碼對碼長的損失較小。

同時，漢語拼音中的主元音一般是 AEIU，而 O 的出現頻率較低，作爲補碼使用可以平衡五個元音的使用頻率，提高手感。

### 多少情況下會跳過第三根

根據計算，所有的大於等於四根字的漢字中，約有四分之一的頻率會跳過第三根。四分之三的頻率會使用四個字根大碼。這是因為在首根位置最常出現的字根都被優化為了不取聲碼。
