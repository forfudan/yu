<script setup>
import CharPlot from '@/plot/CharPlot.vue'
</script>

# 日月輸入法單字編碼

學習了宇浩系列輸入法的拆分規則後，我們可以將任何一個漢字拆成唯一的字根組合。現在，我們討論如何把字根組合轉爲單字編碼。

## 取最多四根

在日月輸入法中，無論一個字能拆成幾個字根，我們只關心其中的**四個根**，分別是：

- 第一根：首根
- 第二根：二根
- 第三根：三根
- 倒數第一根：末根

這同五筆字型相同，和鄭碼、徐碼不同。如果一個字不滿四根，則按首、末、二、三的優先級稱呼它們，比如：

- `木` 可以拆爲`木`一個字根，故而`木`是**單根字**，又稱**字根字**。
- `根` 可以拆爲`木艮`兩個字根，故而`木`是首根、`艮`是末根。它没有二、三根。
- `想` 可以拆爲`木目心`三個字根，故而`木`是首根、`目`是二根、`心`是末根。它没有三根。
- `整` 可以拆爲`木口夂正`四個字根，故而`木`是首根、`口`是次根、`夂`是三根、`正`是末根。
- `籍` 可以拆爲`𥫗丰八龷日`五個字根。我們只關注「首二三末」這四個字根，故而`𥫗`是首根、`丰`是次根、`八`是三根、`日`是末根。`龷`這個根我們不管它。

## 編碼規則

接下來我們學習單字的編碼規則，也就是如何把字根的編碼轉變爲單字編碼。

如果一個字本身就是字根，那麽它的單字編碼就是字根編碼，不言而喻。

::: tip 例

- `弋` 的編碼就是對應的字根編碼：`Ki`，其中`K`是大碼、`i`是韻碼。它是零聲母，故而没有聲碼。
- `木` 的編碼就是對應的字根編碼：`Sme`，其中`S`是大碼、`m`是聲碼、`e`是韻碼。
- `骨` 的編碼就是對應的字根編碼：`Jgu`，其中`J`是大碼、`g`是聲碼、`u`是韻碼。

:::

如果一個字是由多個字根組成的，即**多根字**，它的編碼規則爲：

1. 取首根大碼和聲碼。
1. 取二、三字根的大碼。
1. 取末根的所有碼。
1. 最多取五碼。

::: tip 例

`认`字拆成`讠人`，只有兩根，所以我們取全部根：首根`讠`、末根`人`。根據規則，我們取首根的大碼 `V` 和聲碼（空），然後取末根的所有碼 `Wo`，得到編碼`VWo`。因此，`认`字的編碼是`VWo`。
<CharPlot char='认' :parts='[2,2]' />

`好`字拆成`女子`，只有兩根，所以我們取全部根：首根`女`、末根`子`。根據規則，我們取首根的大碼 `C` 和聲碼 `n`，然後取末根的所有碼 `Lzi`，得到編碼`CnLzi`。因此，`好`字的編碼是`CnLzi`。
<CharPlot char='好' :parts='[3,3]' />

`但`字拆成`亻日一`，只有三根，所以我們取全部根：首根`亻`、二根`日`、末根`一`。根據規則，我們取首根的大碼 `W` 和聲碼（空），然後取二根的大碼 `J`，最後取末根的所有碼 `Fi`，得到編碼`WJFi`。因此，`但`字的編碼是`WJFi`。
<CharPlot char='但' :parts='[2,4,1]' />

`算`字拆成`竹目卄`，只有三根，所以我們取全部根：首根`竹`、二根`目`、末根`廾`。根據規則，我們取首根的大碼 `Y` 和聲碼 `s`，然後取二根的大碼 `G`，最後取末根的所有碼 `Mci`，得到編碼`YsGMci`。注意到，這超過了五碼，而我們只取前五碼`YsGMc`。因此，`算`字的編碼是`YsGMc`。
<CharPlot char='算' :parts='[6,5,3]' />

`织`字拆成`纟口八`，只有三根，所以我們取全部根: 首根`纟`、二根`口`、末根`八`。根據規則，我們取首根的大碼 `K` 和聲碼 `s`，然後取二根的大碼 `D`，最後取末根的所有碼 `Kba`，得到編碼`KsDKba`。注意到，這超過了五碼， 而我們只取前五碼`KsDKb`。因此，`织`字的編碼是`KsDKb`。
<CharPlot char='织' :parts='[3,3,2]' />

`嫩`字拆成`女木口夂`，分別對應了首根`女`、二根`木`、三根`口`、末根`夂`。根據規則，我們取首根的大碼 `C` 和聲碼 `n`，然後取二根的大碼 `S`，接着取三根的大碼 `D`，最後取末根的所有碼 `Tpe`，得到編碼`CnSDTpe`。注意到，這超過了五碼，而我們只取前五碼`CnSDT`。因此，`嫩`字的編碼是`CnSDT`。
<CharPlot char='嫩' :parts='[3,1,3,3,4]' :colors='[1,2,3,2,4]' />

`籍`字拆成`𥫗丰八龷日`，超過了四根，我們只取四根：首根`𥫗`、二根`丰`、三根`八`、末根`日`。根據規則，我們取首根的大碼 `Y` 和聲碼 `s`，然後取二根的大碼 `J`，接着取三根的大碼 `K`，最後取末根的所有碼 `Ji`，得到編碼`YsJKJi`。注意到，這超過了五碼，而我們只取前五碼`YsJKJ`。因此，`籍`字的編碼是`YsJKJ`。
<CharPlot char='籍' :parts='[6,4,2,4,4]' :colors='[1,2,3,4,5]' />

:::

你可能注意到了，在日月輸入法中，每個漢字的編碼不超過**5個字母**。更具體地，一個字可以是2碼、3碼、4碼、或5碼。

## 空格鍵的使用

在很多輸入法軟件中，空格鍵（以下用`_`表示）用來上屏没有達到最大長度的候選字。而在日月輸入法中，空格鍵基本是不需要使用的。這歸功於日月輸入法的**无空格輸入**設計。具體地説：

1. 一個字的編碼等於 5 時，已經是最大長度，無需按空格鍵上屏。只要繼續輸入下一個字的首碼，這個字就會自動上屏。我們稱之爲**六碼頂屏**（請參閲[瓊林擷英](../docs/concepts)瞭解相關概念）。例如：我們打「整理」二字，「整」字的編碼是`SmDTL`。輸入`SmDTL`後，我們直接輸入「理」字的首碼`P`，則「整」字會自動上屏。
1. 一個字的編碼低於 5 時，它一定是以 `aoeiu` 五個字母結尾的。因此上，只要輸入法軟件見到這五個字母，就知道一個字已經輸完，將它上屏。比如「认」字，編碼是`VWo`，輸入`o`的瞬間，「认」字就會自動上屏。

空格鍵只需在以下情況使用：

1. 一個字雖然已經輸完，但由於有其它候選，不能自動上屏，且後續沒有其他字或標點需要輸入，這時候需要按空格鍵（或數字1）上屏首選。
1. 爲輸入效率考量，日月輸入法設置了一些特殊**簡碼**，它们的編碼不以`aoeiu`結尾，這時候需要按空格鍵（或數字1）上屏首選。當然，這些簡碼字的使用是可選的，也可以將它們屏蔽。
