import{g as x}from"./framework.vM2YJXtg.js";let g={};function A(e,t,p,a){var f,i,c,h,r,w,C,L,y,Z;const s=[...e];if(a){let n=[];const o=s[0],m=s[s.length-1];s.length==1?n.push((((i=(f=t.get(o))==null?void 0:f.ma)==null?void 0:i[0])||"?").toUpperCase()):n.push((((h=(c=t.get(o))==null?void 0:c.ma)==null?void 0:h.slice(0,-1))||"?").toUpperCase()),n.push(...s.slice(1).map(l=>{var v,U;return(((U=(v=t.get(l))==null?void 0:v.ma)==null?void 0:U[0])||"?").toUpperCase()}));const u=l=>l.length===2?l[0].toUpperCase()+l[1]:l;return n.push(u(((w=(r=t.get(m))==null?void 0:r.ma)==null?void 0:w.slice(1))||"?")),n.join("").slice(0,5)}else{let n=s.map(o=>{var m,u;return((u=(m=t.get(o))==null?void 0:m.ma)==null?void 0:u[0])||"?"});if(n.length<4){const o=s[s.length-1];n.push(((L=(C=t.get(o))==null?void 0:C.ma)==null?void 0:L[1])||"?")}if(n.length<4&&p){const o=s[0];n.push(((Z=(y=t.get(o))==null?void 0:y.ma)==null?void 0:Z[1])||"?")}return n.join("")}}async function $(e){if(e in g)return g[e];try{const p=await(await fetch(x(e))).text(),a=d(p);return g[e]=a,a}catch(t){throw t instanceof Error&&alert(`无法下载或解析《${e}》文件：${t.cause}`),t}}function d(e){const t=e.split(`
`),a=t.shift().split(",").map(i=>i.trim()),s=a.length,f=new Map;for(let i of t){if(i=i.trim(),!i)continue;const c=i.split(",").map(r=>r.trim());if(c.length!==s)throw new Error(`CSV文件中 ${i} 数据不够 ${s} 条。`);const h={};for(let r=0;r<s;r++)h[a[r]]=c[r];f.set(c[0],h)}return f}async function E(e){return await $(e)}async function F(e){return await $(e)}export{$ as a,E as b,g as c,F as f,A as m};
