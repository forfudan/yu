import{d as ke,k as Y,aa as we,h as S,l as he,y as Ce,v as ye,c as s,o,e as T,m as a,n as _,t as b,F as H,C as I,O as Se,a0 as xe,_ as ze}from"./framework.Cer6JMjx.js";import{f as Te,C as Ee}from"./share.BY2UUWNL.js";import{h as Le}from"./html2canvas-pro.esm.i41XY5GH.js";class _e{static generateFileName(d="æœªå‘½åæ–¹æ¡ˆ",$=!1){const D=new Date().toISOString().split("T")[0].replace(/-/g,"");return`${d}è¼¸å…¥æ³•${$?"å­—æ ¹è¡¨":"å­—æ ¹åœ–"}${D}.png`}static addTemporaryWatermark(d,$="å®‡æµ©ç³»åˆ—è¼¸å…¥æ³• Â· å®˜ç¶²: shurufa.app Â· QQ è¨è«–ç¾¤: 170510762"){const D=document.createElement("div");return D.className="zigen-export-watermark",D.style.cssText=`
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            text-align: center;
            margin-top: 16px;
            font-size: 0.9rem;
            color: #4f46e5;
            font-weight: 500;
            border: 1px solid #d1d5db;
            font-family: 'Noto Serif SC', serif;
            backdrop-filter: blur(4px);
        `,D.textContent=$,d.appendChild(D),D}static removeTemporaryWatermark(d){d&&d.parentNode&&d.parentNode.removeChild(d)}static async exportZigenMapToPNG(d,$="æœªå‘½åæ–¹æ¡ˆ",D=!1,X={}){const{copyToClipboard:ee=!0,download:O=!0,scale:P=2,addWatermark:k=!0}=X,m="#ffffff";let w=null;k&&(w=this.addTemporaryWatermark(d));let C,A=[],R,te=[],M=[],q=null,se=[];try{document.querySelectorAll(".dark").forEach(v=>{const h=v.classList.contains("dark");se.push({element:v,hadDarkClass:h}),h&&v.classList.remove("dark")}),C=d.querySelectorAll(".layout-toggle-btn, .export-btn"),C.forEach((v,h)=>{const y=v;A[h]=y.style.display,y.style.display="none"}),R=d.querySelectorAll(".text-sm.text-gray-500, .text-xs.text-gray-400"),R.forEach((v,h)=>{var Z,L,f;const y=v;((Z=y.textContent)!=null&&Z.includes("é»æ“Šå­—æ ¹å¯æŸ¥çœ‹ä¾‹å­—")||(L=y.textContent)!=null&&L.includes("åˆ‡æ›åœ–è¡¨å½¢æ…‹")||(f=y.textContent)!=null&&f.includes("æŒ‰éµæ’åº"))&&(te[h]=y.style.display,y.style.display="none")}),q=document.createElement("div"),q.className="export-title",q.style.cssText=`
                text-align: center;
                font-size: 1.5rem;
                font-weight: bold;
                margin-bottom: 1.5rem;
                color: #5400a2ff;
                font-family: 'Noto Serif SC', serif;
            `;const oe=d.querySelector(".desktop-list-layout")!==null||d.querySelector(".mobile-key-row")!==null,ne=oe?"å­—æ ¹è¡¨":"å­—æ ¹åœ–";q.textContent=`${$}è¼¸å…¥æ³•${ne}`,d.insertBefore(q,d.firstChild),M.push({element:d,originalStyle:d.style.cssText}),d.style.cssText+=`
                min-width: 1028px !important;    /* å­—æ ¹åœ–çš„æœ€å°å¯¬åº¦ */
                width: auto !important;          
                overflow: visible !important;    
                box-sizing: border-box !important; 
            `;const z=d.querySelector(".keyboard-layout");z&&(M.push({element:z,originalStyle:z.style.cssText}),z.style.cssText+=`
                    min-width: 1028px !important;    
                    width: auto !important;          
                    overflow: visible !important;    
                    box-sizing: border-box !important; 
                `,z.querySelectorAll(".keyboard-key").forEach(f=>{const g=f;M.push({element:g,originalStyle:g.style.cssText}),g.style.cssText+=`
                        width: 96px !important;          /* æŒ‰éµå¡ç‰‡å›ºå®šå¯¬åº¦ */
                        flex: 0 0 96px !important;       /* å›ºå®šå½ˆæ€§ä½ˆå±€ */
                    `}),z.querySelectorAll(".zigen-list").forEach(f=>{const g=f;M.push({element:g,originalStyle:g.style.cssText}),g.style.cssText+=`
                        grid-template-columns: repeat(auto-fill, minmax(16px, max-content)) !important; /* å­—æ ¹æœ€å°å¯¬åº¦ */
                    `}),z.querySelectorAll(".zigen-code").forEach(f=>{const g=f;M.push({element:g,originalStyle:g.style.cssText}),g.style.cssText+=`
                        margin-top: 1px !important;
                        padding-top: 1px !important;
                        min-height: 8px !important;
                        line-height: 1.0 !important;
                    `}),z.querySelectorAll(".zigen-item").forEach(f=>{const g=f;M.push({element:g,originalStyle:g.style.cssText}),g.style.cssText+=`
                        gap: 1px !important;
                        padding: 1px !important;
                    `;const W=f.querySelector(".zigen-code");W&&(M.push({element:W,originalStyle:W.style.cssText}),W.style.cssText+=`
                            margin-top: 1px !important;
                            min-height: 2px !important;
                        `)}),z.querySelectorAll(".keyboard-key").forEach(f=>{var W,le;const g=(le=(W=f.querySelector(".key-label"))==null?void 0:W.textContent)==null?void 0:le.toLowerCase();if(["z",";",",",".","/"].includes(g||"")){const Q=f.querySelector(".no-zigen-text");Q&&(M.push({element:Q,originalStyle:Q.style.cssText}),Q.style.cssText=`
                                display: flex !important;
                                flex-direction: column !important;
                                align-items: center !important;
                                justify-content: center !important;
                                text-align: center !important;
                                font-size: 0.7rem !important;
                                height: 100% !important;
                                line-height: 1.3 !important;
                                padding: 0.2rem !important;
                            `,Q.querySelectorAll("div").forEach(ae=>{const ie=ae;ie.style.cssText=`
                                    writing-mode: horizontal-tb !important;
                                    text-orientation: mixed !important;
                                    white-space: nowrap !important;
                                    margin: 0.1rem 0 !important;
                                    text-align: center !important;
                                    font-size: 0.65rem !important;
                                `}))}})),await new Promise(v=>setTimeout(v,500));const E=d.getBoundingClientRect(),B=Math.max(E.width,d.scrollWidth,1028),U=Math.max(E.height,d.scrollHeight),j=await Le(d,{backgroundColor:m,scale:P,useCORS:!0,allowTaint:!1,logging:!0,width:B,height:U,windowWidth:B,windowHeight:U,scrollX:0,scrollY:0,x:0,y:0,ignoreElements:v=>v.classList.contains("export-btn")||v.classList.contains("layout-toggle-btn")||v.classList.contains("pinned-popup"),foreignObjectRendering:!1,removeContainer:!1,imageTimeout:15e3});this.restoreAllChanges(C,A,R,te,M,q,se);const F=j.toDataURL("image/png",1),K=this.generateFileName($,oe);if(ee&&this.isClipboardSupported())try{const v=await new Promise(h=>{j.toBlob(y=>{y&&h(y)},"image/png",1)});return await navigator.clipboard.write([new ClipboardItem({"image/png":v})]),console.log("å­—æ ¹åœ–å·²è¤‡è£½åˆ°å‰ªè²¼æ¿"),{success:!0,message:"å­—æ ¹åœ–å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ä¸¦ä¸‹è¼‰",dataUrl:F,filename:K}}catch(v){console.warn("è¤‡è£½åˆ°å‰ªè²¼æ¿å¤±æ•—ï¼Œå°‡åƒ…é€²è¡Œä¸‹è¼‰:",v)}if(O){const v=document.createElement("a");v.download=K,v.href=F,v.style.display="none",document.body.appendChild(v),v.click(),document.body.removeChild(v),console.log("å­—æ ¹åœ–å·²ä¸‹è¼‰:",K)}return{success:!0,message:"å­—æ ¹åœ–å·²ä¸‹è¼‰",dataUrl:F,filename:K}}catch(G){return console.error("å°å‡ºå­—æ ¹åœ–å¤±æ•—:",G),this.restoreAllChanges(C,A,R,te,M,q,se),{success:!1,message:`å°å‡ºå¤±æ•—: ${G instanceof Error?G.message:"æœªçŸ¥éŒ¯èª¤"}`,dataUrl:"",filename:""}}finally{w&&this.removeTemporaryWatermark(w)}}static restoreAllChanges(d,$,D,X,ee,O,P){P.forEach(({element:k,hadDarkClass:m})=>{m&&k.classList.add("dark")}),d.forEach((k,m)=>{const w=k;w.style.display=$[m]}),D.forEach((k,m)=>{const w=k;X[m]!==void 0&&(w.style.display=X[m])}),O&&O.parentNode&&O.remove(),ee.forEach(({element:k,originalStyle:m})=>{k.style.cssText=m,k.querySelectorAll("div").forEach(C=>{const A=C;A.style.cssText=""})})}static isClipboardSupported(){return typeof navigator<"u"&&"clipboard"in navigator&&"write"in navigator.clipboard}static getSchemeDisplayName(d){return{joy:"å¿é›²",light:"å…‰è¯",star:"æ˜Ÿé™³",ming:"æ—¥æœˆ",ling:"éˆæ˜",wafel:"å‰æ—¦é¤…",tianma:"å¤©ç¢¼"}[d]||d}}const $e={class:"zigen-map-container"},Ae={key:0,class:"flex justify-center items-center py-8"},Ze={key:1,class:"flex justify-between items-center mb-4 px-5"},De={key:0,class:"flex items-center space-x-4"},Me={class:"flex items-center space-x-2"},Ne=["disabled","title"],Pe={key:0},qe={key:1},Be={class:"flex items-center space-x-2"},Ke=["title"],We={key:0},Ue={key:1},je={key:0,class:"flex items-center space-x-2"},Ve=["title"],He={key:0},Ie={key:1},Oe={key:1,class:"flex items-center space-x-2"},Re=["title"],Fe={key:0},Xe={key:1},Ge={class:"flex items-center space-x-2"},Qe=["title"],Je={key:0},Ye={key:1},et={key:1,class:"flex items-center space-x-2"},tt=["disabled","title"],st={key:0},ot={key:1},nt=["title"],lt={key:0},at={key:1},it=["title"],rt={key:0},ct={key:1},dt={key:2,class:"mt-2 text-center"},ut={key:2,class:"keyboard-layout"},pt={class:"key-label"},vt=["onClick"],ft={class:"zigen-code"},gt={key:0,class:"more-indicator"},mt={key:1,class:"text-xs text-gray-400 no-zigen-text"},ht={key:0,class:"vertical-text zigen-font"},yt={key:1,class:"vertical-text zigen-font"},xt={key:2,class:"vertical-text zigen-font"},_t={key:3,class:"vertical-text zigen-font"},bt={key:4,class:"vertical-text zigen-font"},kt={key:5,class:"vertical-text zigen-font"},wt={key:6,class:"vertical-text zigen-font"},Ct={key:7,class:"vertical-text single-line zigen-font"},St={class:"mobile-key-label"},zt={key:0,class:"mobile-zigen-container"},Tt={class:"mobile-zigen-list text-indigo-800 dark:text-indigo-300"},Et=["onClick"],Lt={class:"zigen-code"},$t={key:1,class:"mobile-no-zigen"},At={key:0,class:"mobile-key-desc zigen-font"},Zt={key:1,class:"mobile-key-desc zigen-font"},Dt={key:2,class:"mobile-key-desc zigen-font"},Mt={key:3,class:"mobile-key-desc"},Nt={key:4,class:"pinned-popup"},Pt={class:"popup-container"},qt={class:"popup-body"},Bt={class:"popup-header"},Kt={class:"popup-title"},Wt={class:"zigen-rows text-indigo-800 dark:text-indigo-300"},Ut={class:"zigen-row-inline"},jt={class:"zigen-header-inline current-zigen"},Vt={key:0,class:"example-chars-same-line"},Ht=["onClick","title"],It={key:1,class:"example-chars-same-line"},Ot={key:0,class:"pinyin-info"},Rt={class:"zigen-row-inline"},Ft={class:"zigen-header-inline other-zigen"},Xt={key:0,class:"example-chars-same-line"},Gt=["onClick","title"],Qt={key:1,class:"example-chars-same-line"},Jt={key:0,class:"pinyin-info"},de=7,Yt=ke({__name:"ZigenMap",props:{defaultScheme:{},columnMinWidth:{},zigenFontClass:{},alwaysVisibleZigens:{}},setup(ve){const d=ve,$=Y(()=>d.zigenFontClass||"zigen-font"),D=Y(()=>{if(d.alwaysVisibleZigens)return d.alwaysVisibleZigens;switch(z.value){case"ling":return"Qï¡¡ã€€Wä¹šïšïš€ã€€Rå†«âº€ï™¡è™ã€€Tä¹€é¾µç”¨ã€€På·´ã€€Sï’‹ïš™ï˜µï˜´ã€€Fä¸†ï”†ï’ã€€Gï£ï ‡ã€€Hã€€Jï¡€ï˜±æ”µã€€Kä¸„ã€€Lï–ƒïš—ïš˜ã€€Xï’æœ©ã€€Cä’‘ïœïœ„ã€€Vã€€âºˆè‚€ã€€NâºŒï¤âº®ï•ã€€Mï ¢";default:return"å†«"}}),X=we(d,"columnMinWidth"),ee=Y(()=>`repeat(auto-fill, minmax(${X.value||"1.0rem"}, max-content))`),O=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l",";"],["z","x","c","v","b","n","m",",",".","/"]],P=["'"],k=S(!1),m=S(!1),w=S(!0),C=S(!1),A=S(!1),R=()=>{k.value=window.innerWidth<720},te=()=>{m.value=!m.value},M=()=>{w.value=!w.value},q=()=>{C.value=!C.value},se=()=>{A.value=!A.value};he(()=>{R(),window.addEventListener("resize",R)}),Ce(()=>{window.removeEventListener("resize",R)});const G=Y(()=>{const n=O.flat();return w.value?n.slice().sort((e,r)=>{const t=/^[a-zA-Z]$/.test(e),u=/^[a-zA-Z]$/.test(r);return t&&!u?-1:!t&&u?1:e.localeCompare(r)}):n}),oe=["joy","light","star","ming","wafel","ling"];function ne(n){const e=oe.includes(n);return{zigenUrl:`/zigen-${n}.csv`,chaifenUrl:e?"/chaifen.json":`/chaifen-${n}.json`}}const z=Y(()=>d.defaultScheme||"star"),E=S(),B=S(),U=S(!1),j=S(new Map),F=S(0),K=S(null),v=S(null),h=S({}),y=S(!1),Z=S(new Set),L=S(!1),f=S("");ye(()=>d.defaultScheme,()=>{B.value=null,j.value.clear(),F.value=0,console.log("æ–¹æ¡ˆå·²åˆ‡æ›ï¼Œå·²æ¸…é™¤ä¾‹å­—ç·©å­˜")});const g=Y(()=>{var r;if(!E.value)return console.log("No zigenMap data"),{};console.log("ZigenMap has data, size:",E.value.size);const n={},e=[];for(const[t,u]of E.value){const l=u.font,c=(r=u.ma)==null?void 0:r.trim();if(!c||c.length===0||l==null)continue;const i=c[0].toLowerCase(),p=c.slice(1);e.push({font:l,ma:c,firstLetter:i,code:p})}console.log(`Found ${e.length} valid zigens`);for(let t=0;t<e.length;t++){const u=e[t],{font:l,ma:c,firstLetter:i,code:p}=u;n[i]||(n[i]={visible:[],hidden:[],all:[]});const x=t>0?e[t-1]:null,N=x&&x.code===p&&x.firstLetter===i,J=n[i].visible.find(ce=>ce.code===p),pe=D.value.includes(l);let V=!1;J?N&&!pe?(n[i].hidden.push({font:l,code:p}),V=!0):(n[i].visible.push({font:l,code:p}),V=!1):(n[i].visible.push({font:l,code:p}),V=!1),n[i].all.push({font:l,code:p,isHidden:V})}return console.log("Final result:",n),n}),W=Y(()=>{var r;if(!E.value)return{};const n={};for(const t of G.value)n[t]=[];const e=[];for(const[t,u]of E.value){const l=u.font,c=(r=u.ma)==null?void 0:r.trim();if(!c||c.length===0||l==null)continue;const i=c[0].toLowerCase(),p=c.slice(1);e.push({font:l,ma:c,firstLetter:i,code:p})}C.value&&e.sort((t,u)=>t.firstLetter!==u.firstLetter?0:t.code.length!==u.code.length?t.code.length-u.code.length:0);for(let t=0;t<e.length;t++){const u=e[t],{font:l,ma:c,firstLetter:i,code:p}=u,x=t>0?e[t-1]:null,N=x&&x.code===p&&x.firstLetter===i,J=n[i].find(ce=>ce.code===p&&!ce.isHidden),pe=D.value.includes(l);let V=!1;J&&N&&!pe?V=!0:V=!1,n[i].push({font:l,code:p,isHidden:V})}return n}),le=async n=>{const e=n.normalize("NFC");let r=new Set;if(j.value.has(e))return r=j.value.get(e),console.log(`âœ… å¾ç·©å­˜ä¸­ç²å–å­—æ ¹ "${e}" çš„ä¾‹å­— ${r.size} å€‹`),Array.from(r).slice(0,de);if(!B.value)return console.log("chaifenLoader æœªåˆå§‹åŒ–"),[];try{console.log(`é–‹å§‹ç‚ºå­—æ ¹ "${n}(${e})" æœç´¢ä¾‹å­—, cachedCheckedCount=${F.value}...`);const t=new Promise((i,p)=>{setTimeout(()=>p(new Error("æ•¸æ“šåŠ è¼‰è¶…æ™‚")),1e4)}),u=await Promise.race([B.value.loadData(),t]),l=Object.entries(u).slice(0,3);console.log("æ•¸æ“šæ¨£æœ¬:",l);let c=0;for(const[i,p]of Object.entries(u).slice(F.value)){c++;const x=p;if(c<=5&&console.log(`å­—ç¬¦ "${i}" çš„æ‹†åˆ†æ•¸æ“š:`,x.d),x.d){for(const N of x.d){j.value.has(N)||j.value.set(N,new Set);const J=j.value.get(N);J.size<20&&J.add(i),N===e&&(r=J,console.log(`âœ… æ‰¾åˆ°åŒ¹é…: "${i}" åŒ…å«å­—æ ¹ "${e}", æ‹†åˆ†: "${x.d}"`))}if(r.size>=20)break}c%1e3===0&&console.log(`å·²æª¢æŸ¥ ${c} å€‹å­—ç¬¦ï¼Œæ‰¾åˆ° ${r.size} å€‹ä¾‹å­—`)}return F.value+=c,console.log(`å­—æ ¹ "${e}" æœ€çµ‚æ‰¾åˆ°ä¾‹å­—:`,Array.from(r).slice(0,5),`(ç¸½å…±${r.size}å€‹)`),Array.from(r)}catch(t){return console.error("ç²å–ä¾‹å­—å¤±æ•—:",t),t instanceof Error&&t.message==="æ•¸æ“šåŠ è¼‰è¶…æ™‚"&&console.error("æ•¸æ“šåŠ è¼‰è¶…æ™‚ï¼Œè«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥"),Array.from(r)}},Q=async n=>{const e=n.normalize("NFC");let r=new Set;if(!B.value)return console.log("chaifenLoader æœªåˆå§‹åŒ–"),[];try{console.log(`é–‹å§‹ç‚ºå­—æ ¹ "${n}" æœç´¢æ‰€æœ‰ä¾‹å­—...`);const t=new Promise((l,c)=>{setTimeout(()=>c(new Error("æ•¸æ“šåŠ è¼‰è¶…æ™‚")),3e4)}),u=await Promise.race([B.value.loadData(),t]);for(const[l,c]of Object.entries(u)){const i=c;i.d&&i.d.includes(e)&&r.add(l)}return console.log(`å­—æ ¹ "${e}" æ‰¾åˆ°æ‰€æœ‰ä¾‹å­—: ${r.size} å€‹`),Array.from(r)}catch(t){return console.error("ç²å–æ‰€æœ‰ä¾‹å­—å¤±æ•—:",t),Array.from(r)}};async function ue(){U.value=!0;try{const n=ne(z.value),e=await Te(n.zigenUrl);E.value=e,console.log("æˆ‘å°±çŸ¥é“ä½ æœƒå¿ä¸ä½æ‰“é–‹æ§åˆ¶è‡ºğŸ˜"),console.log(`å·²åŠ è¼‰å­—æ ¹æ•¸æ“šï¼Œæ–‡ä»¶: ${n.zigenUrl}`),console.log("æ³¨æ„ï¼šæ‹†åˆ†æ•¸æ“šå°‡åœ¨ç¬¬ä¸€æ¬¡é»æ“Šå­—æ ¹æ™‚æ‰åŠ è¼‰")}catch(n){console.error("åŠ è¼‰å­—æ ¹æ•¸æ“šå¤±æ•—:",n)}finally{U.value=!1}}function ae(n){switch(n){case";":return"æ¬¡é¸";case",":return"é€—è™Ÿ";case".":return"å¥è™Ÿ";default:return"æ— å­—æ ¹"}}async function ie(n,e){var c;if(n.stopPropagation(),!B.value){console.log("é»æ“Šæ™‚åˆå§‹åŒ–æ‹†åˆ†æ•¸æ“šåŠ è¼‰å™¨...");const i=ne(z.value);B.value=Ee.getInstance(i.chaifenUrl),console.log(`å·²åˆå§‹åŒ– ChaiDataLoaderï¼Œä½¿ç”¨æ–‡ä»¶: ${i.chaifenUrl}`)}if(y.value&&K.value===e.font){re();return}K.value=e.font,y.value=!0;let r="";if(E.value){for(const[i,p]of E.value)if(p.font===e.font&&((c=p.ma)==null?void 0:c.slice(1))===e.code){r=p.ma;break}}const t=be(e.font,r);v.value=t,console.log("é–‹å§‹ç²å–ä¾‹å­—ï¼Œå­—æ ¹æ•¸é‡:",[...t.visible,...t.hidden].length);const u={},l=[...t.visible,...t.hidden];for(const i of l){console.log(`æ­£åœ¨ç²å–å­—æ ¹ "${i.font}" çš„ä¾‹å­—...`);const p=await le(i.font);console.log(`å­—æ ¹ "${i.font}" æ‰¾åˆ°ä¾‹å­—:`,p.length,"å€‹"),u[i.font]=p}h.value=u,console.log(`å›ºå®šå½ˆçª— - å­—æ ¹ "${e.font}" çš„æœ€çµ‚ä¾‹å­—:`,h.value)}function re(){y.value=!1,K.value=null,v.value=null,h.value={},Z.value.clear()}async function fe(n){var e;if(Z.value.has(n))Z.value.delete(n);else if(Z.value.add(n),((e=h.value[n])==null?void 0:e.length)<=de){console.log(`æ­£åœ¨åŠ è¼‰å­—æ ¹ "${n}" çš„æ‰€æœ‰ä¾‹å­—...`);const r=await Q(n);h.value[n]=r,console.log(`å·²åŠ è¼‰å­—æ ¹ "${n}" çš„ ${r.length} å€‹ä¾‹å­—`)}}async function ge(){if(!L.value){L.value=!0,f.value="";try{const n=document.querySelector(".zigen-map-container");if(!n)throw new Error("æ‰¾ä¸åˆ°å­—æ ¹åœ–å®¹å™¨å…ƒç´ ");y.value&&re(),await new Promise(t=>setTimeout(t,100));const e=_e.getSchemeDisplayName(z.value),r=await _e.exportZigenMapToPNG(n,e,m.value,{copyToClipboard:!1,download:!0,scale:3,addWatermark:!0});r.success?(f.value=r.message,setTimeout(()=>{f.value=""},3e3)):(f.value=r.message,setTimeout(()=>{f.value=""},5e3))}catch(n){console.error("å°å‡ºå­—æ ¹åœ–å¤±æ•—:",n),f.value=`å°å‡ºå¤±æ•—: ${n instanceof Error?n.message:"æœªçŸ¥éŒ¯èª¤"}`,setTimeout(()=>{f.value=""},5e3)}finally{L.value=!1}}}function me(n){return["ling","ming"].includes(z.value)?n.length===1:!1}function be(n,e){var u,l;const r=[],t=[];if(!E.value||!e)return{visible:r,hidden:t};for(const[c,i]of E.value){const p=i.font,x=(u=i.ma)==null?void 0:u.trim(),N=(l=i.pinyin)==null?void 0:l.trim();!x||!p||p===null||p===void 0||x===e&&(p===n?r.unshift({font:p,code:x,pinyin:N}):t.push({font:p,code:x,pinyin:N}))}return{visible:r,hidden:t}}return ye(()=>z.value,ue),he(()=>{ue(),document.addEventListener("click",n=>{if(y.value){const e=document.querySelector(".pinned-popup");e&&!e.contains(n.target)&&re()}})}),(n,e)=>{var r;return o(),s("div",$e,[U.value?(o(),s("div",Ae,[...e[0]||(e[0]=[a("div",{class:"loading loading-spinner loading-lg"},null,-1),a("span",{class:"ml-2"},"æ­£åœ¨åŠ è¼‰å­—æ ¹æ•¸æ“š...",-1)])])):T("",!0),U.value?T("",!0):(o(),s("div",Ze,[e[7]||(e[7]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," é»æ“Šå­—æ ¹å¯æŸ¥çœ‹ä¾‹å­— ",-1)),k.value?T("",!0):(o(),s("div",De,[a("div",Me,[a("button",{onClick:ge,class:_(["export-btn layout-toggle-btn",{"layout-toggle-active":L.value}]),disabled:L.value,title:L.value?"å°å‡ºä¸­...":"å°å‡ºå­—æ ¹åœ–"},[L.value?(o(),s("span",qe,"â³")):(o(),s("span",Pe,"ğŸ“¸"))],10,Ne),f.value?(o(),s("span",{key:0,class:_(["text-xs",f.value.includes("å¤±æ•—")?"text-red-500":"text-green-500"])},b(f.value),3)):T("",!0)]),a("div",Be,[e[1]||(e[1]=a("span",{class:"text-xs text-gray-400"},"ç·¨ç¢¼é•·åº¦",-1)),a("button",{onClick:q,class:_(["layout-toggle-btn",{"layout-toggle-active":C.value}]),title:C.value?"æ¢å¾©åŸå§‹é †åº":"çŸ­ç·¨ç¢¼å„ªå…ˆï¼ˆ2ç¢¼â†’3ç¢¼ï¼‰"},[C.value?(o(),s("span",Ue,"ğŸ“")):(o(),s("span",We,"ğŸ”¢"))],10,Ke)]),m.value?(o(),s("div",je,[e[2]||(e[2]=a("span",{class:"text-xs text-gray-400"},"æŒ‰éµæ’åº",-1)),a("button",{onClick:M,class:_(["layout-toggle-btn",{"layout-toggle-active":w.value}]),title:w.value?"åˆ‡æ›ç‚ºéµç›¤é †åº":"åˆ‡æ›ç‚ºå­—æ¯é †åº"},[w.value?(o(),s("span",He,"ğŸ”¤")):(o(),s("span",Ie,"âŒ¨ï¸"))],10,Ve)])):T("",!0),m.value?T("",!0):(o(),s("div",Oe,[e[3]||(e[3]=a("span",{class:"text-xs text-gray-400"},"é¡¯ç¤ºæ¨¡å¼",-1)),a("button",{onClick:se,class:_(["layout-toggle-btn",{"layout-toggle-active":A.value}]),title:A.value?"éš±è—é‡ç¢¼å­—æ ¹":"é¡¯ç¤ºæ‰€æœ‰å­—æ ¹"},[A.value?(o(),s("span",Xe,"ğŸ‘ï¸â€ğŸ—¨ï¸")):(o(),s("span",Fe,"ğŸ‘ï¸"))],10,Re)])),a("div",Ge,[e[4]||(e[4]=a("span",{class:"text-xs text-gray-400"},"åˆ‡æ›åœ–è¡¨å½¢æ…‹",-1)),a("button",{onClick:te,class:_(["layout-toggle-btn",{"layout-toggle-active":m.value}]),title:m.value?"åˆ‡æ›ç‚ºç¶²æ ¼å¸ƒå±€":"åˆ‡æ›ç‚ºåˆ—è¡¨å¸ƒå±€"},[m.value?(o(),s("span",Ye,"âŠ")):(o(),s("span",Je,"â˜°"))],10,Qe)])])),k.value?(o(),s("div",et,[a("button",{onClick:ge,class:_(["export-btn layout-toggle-btn",{"layout-toggle-active":L.value}]),disabled:L.value,title:L.value?"å°å‡ºä¸­...":"å°å‡ºå­—æ ¹åœ–"},[L.value?(o(),s("span",ot,"â³")):(o(),s("span",st,"ğŸ“¸"))],10,tt),e[5]||(e[5]=a("span",{class:"text-xs text-gray-400"},"æŒ‰éµæ’åº",-1)),a("button",{onClick:M,class:_(["layout-toggle-btn",{"layout-toggle-active":w.value}]),title:w.value?"åˆ‡æ›ç‚ºéµç›¤é †åº":"åˆ‡æ›ç‚ºå­—æ¯é †åº"},[w.value?(o(),s("span",lt,"ğŸ”¤")):(o(),s("span",at,"âŒ¨ï¸"))],10,nt),e[6]||(e[6]=a("span",{class:"text-xs text-gray-400"},"ç·¨ç¢¼é•·åº¦",-1)),a("button",{onClick:q,class:_(["layout-toggle-btn",{"layout-toggle-active":C.value}]),title:C.value?"æ¢å¾©åŸå§‹é †åº":"çŸ­ç·¨ç¢¼å„ªå…ˆï¼ˆ2ç¢¼â†’3ç¢¼ï¼‰"},[C.value?(o(),s("span",ct,"ğŸ“")):(o(),s("span",rt,"ğŸ”¢"))],10,it)])):T("",!0),k.value&&f.value?(o(),s("div",dt,[a("span",{class:_(["text-xs",f.value.includes("å¤±æ•—")?"text-red-500":"text-green-500"])},b(f.value),3)])):T("",!0)])),!U.value&&E.value&&!k.value&&!m.value?(o(),s("div",ut,[(o(),s(H,null,I(O,(t,u)=>a("div",{key:u,class:"keyboard-row"},[(o(!0),s(H,null,I(t,l=>{var c;return o(),s("div",{key:l,class:_(["keyboard-key",{"empty-key":P.includes(l)}])},[a("div",pt,b(l.toUpperCase()),1),!P.includes(l)&&((c=g.value[l])==null?void 0:c.visible.length)>0?(o(),s("div",{key:0,class:"zigen-list text-indigo-800 dark:text-indigo-300",style:Se({gridTemplateColumns:ee.value})},[(o(!0),s(H,null,I(C.value?[...A.value?g.value[l].all:g.value[l].all.filter(i=>!i.isHidden)].sort((i,p)=>i.code.length-p.code.length):A.value?g.value[l].all:g.value[l].all.filter(i=>!i.isHidden),(i,p)=>(o(),s("span",{key:p,class:_(["zigen-item",{"small-root-zigen":me(i.code)}]),onClick:x=>ie(x,i)},[a("span",{class:_($.value)},b(i.font),3),a("span",ft,b(i.code),1)],10,vt))),128)),!A.value&&g.value[l].hidden.length>0?(o(),s("span",gt,"â‹¯")):T("",!0)],4)):P.includes(l)?T("",!0):(o(),s("div",mt,[l==="/"?(o(),s("div",ht,[...e[8]||(e[8]=[a("div",null,"å¼•å°ç‰¹æ®Šç¬¦è™Ÿ",-1),a("div",null,"åˆ‡æ›å¤šé‡è¨»è§£",-1)])])):l==="z"?(o(),s("div",yt,[...e[9]||(e[9]=[a("div",null,"å¼•å°æ‹¼éŸ³åæŸ¥",-1),a("div",null,"å¼•å°æ­·å²è¼¸å…¥",-1)])])):l==="a"?(o(),s("div",xt,[...e[10]||(e[10]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€äº†",-1)])])):l==="e"?(o(),s("div",_t,[...e[11]||(e[11]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€çš„",-1)])])):l==="i"?(o(),s("div",bt,[...e[12]||(e[12]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€æ˜¯",-1)])])):l==="o"?(o(),s("div",kt,[...e[13]||(e[13]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€æˆ‘",-1)])])):l==="u"?(o(),s("div",wt,[...e[14]||(e[14]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€ä¸",-1)])])):(o(),s("div",Ct,b(ae(l)),1))]))],2)}),128))])),64))])):T("",!0),!U.value&&E.value&&(k.value||m.value)?(o(),s("div",{key:3,class:_(["mobile-layout",{"desktop-list-layout":!k.value&&m.value}])},[(o(!0),s(H,null,I(G.value,t=>{var u;return o(),s("div",{key:t,class:_(["mobile-key-row",{"empty-mobile-key":P.includes(t)}])},[a("div",St,b(t.toUpperCase()),1),!P.includes(t)&&((u=W.value[t])==null?void 0:u.length)>0?(o(),s("div",zt,[a("div",Tt,[(o(!0),s(H,null,I(W.value[t],(l,c)=>(o(),s("span",{key:`sorted-${c}`,class:_(["mobile-zigen-item",{"mobile-hidden-zigen":l.isHidden,"mobile-small-root-zigen":!l.isHidden&&me(l.code)}]),onClick:i=>ie(i,l)},[a("span",{class:_($.value)},b(l.font),3),a("span",Lt,b(l.code),1)],10,Et))),128))])])):P.includes(t)?T("",!0):(o(),s("div",$t,[t==="/"?(o(),s("span",At,"å¼•å°ç‰¹æ®Šç¬¦è™Ÿ")):t==="z"?(o(),s("span",Zt,"å¼•å°æ‹¼éŸ³åæŸ¥")):["a","e","i","o","u"].includes(t)?(o(),s("span",Dt," ä¸€ç¢¼ä¸Šå±å­— ")):(o(),s("span",Mt,b(ae(t)),1))]))],2)}),128))],2)):T("",!0),y.value&&K.value&&v.value?(o(),s("div",Nt,[a("div",Pt,[a("div",qt,[a("div",Bt,[a("h3",Kt," ç·¨ç¢¼ "+b(((r=v.value.visible[0])==null?void 0:r.code)||K.value)+" ä¸Šçš„å­—æ ¹ ",1),a("button",{onClick:re,class:"close-btn"},"âœ•")]),a("div",Wt,[(o(!0),s(H,null,I(v.value.visible,(t,u)=>{var l;return o(),s("div",{key:`pinned-visible-${u}`,class:"zigen-row-wrapper"},[a("div",Ut,[a("div",jt,[a("span",{class:_($.value)},b(t.font),3)]),((l=h.value[t.font])==null?void 0:l.length)>0?(o(),s("div",Vt,[(o(!0),s(H,null,I(Z.value.has(t.font)?h.value[t.font]:h.value[t.font].slice(0,de),c=>(o(),s("span",{key:c,class:"example-char zigen-font"},b(c),1))),128)),a("button",{onClick:xe(c=>fe(t.font),["stop"]),class:"example-char expand-btn",type:"button",title:Z.value.has(t.font)?"æ”¶èµ·":"å±•é–‹é¡¯ç¤ºæ‰€æœ‰ä¾‹å­—"},b(Z.value.has(t.font)?"â–²":"â–¼"),9,Ht)])):(o(),s("div",It,[...e[15]||(e[15]=[a("span",{class:"loading-text"},"æ­£åœ¨åŠ è¼‰...",-1)])]))]),t.pinyin?(o(),s("div",Ot,b(t.pinyin),1)):T("",!0)])}),128)),(o(!0),s(H,null,I(v.value.hidden,(t,u)=>{var l;return o(),s("div",{key:`pinned-hidden-${u}`,class:"zigen-row-wrapper"},[a("div",Rt,[a("div",Ft,[a("span",{class:_($.value)},b(t.font),3)]),((l=h.value[t.font])==null?void 0:l.length)>0?(o(),s("div",Xt,[(o(!0),s(H,null,I(Z.value.has(t.font)?h.value[t.font]:h.value[t.font].slice(0,de),c=>(o(),s("span",{key:c,class:"example-char zigen-font"},b(c),1))),128)),a("button",{onClick:xe(c=>fe(t.font),["stop"]),class:"example-char expand-btn",type:"button",title:Z.value.has(t.font)?"æ”¶èµ·":"å±•é–‹é¡¯ç¤ºæ‰€æœ‰ä¾‹å­—"},b(Z.value.has(t.font)?"â–²":"â–¼"),9,Gt)])):(o(),s("div",Qt,[...e[16]||(e[16]=[a("span",{class:"loading-text"},"æ­£åœ¨åŠ è¼‰...",-1)])]))]),t.pinyin?(o(),s("div",Jt,b(t.pinyin),1)):T("",!0)])}),128))])])])])):T("",!0)])}}}),os=ze(Yt,[["__scopeId","data-v-22dd411a"]]);export{os as Z};
