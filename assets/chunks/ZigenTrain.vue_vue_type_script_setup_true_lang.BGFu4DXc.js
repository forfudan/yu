var ue=Object.defineProperty;var ce=(C,e,t)=>e in C?ue(C,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):C[e]=t;var S=(C,e,t)=>ce(C,typeof e!="symbol"?e+"":e,t);import{c as de,f as ge}from"./share.DZjQ0EVH.js";import{d as re,h as p,l as J,R as P,aa as Y,k as O,v as ve,c,o as d,F as ee,e as F,m as n,t as R,p as G,n as i,O as pe,C as fe,a3 as me,a4 as xe,a as te,a0 as he,a2 as ye,_ as we,E as Z,H as be}from"./framework.D5VGNaZP.js";import{f as Ce}from"./share.BaGPHDUM.js";class se{constructor(e){S(this,"items",new Map);S(this,"storageKey");S(this,"currentLearningIndex",0);S(this,"practiceCounter",0);S(this,"totalGroups",0);S(this,"INITIAL_INTERVALS",[2,5,10]);S(this,"REINFORCE_INTERVAL",1);S(this,"MAX_INTERVAL",20);S(this,"GRADUATION_THRESHOLD",3);this.storageKey=`advanced_schedule_${e}`,this.loadFromStorage()}initializeWithGroupCount(e){this.totalGroups=e;for(let t=0;t<e;t++)this.items.has(t)||this.items.set(t,{index:t,consecutiveCorrect:0,totalReviews:0,isCompleted:!1,nextReviewAt:0,currentInterval:0,lastPracticedAt:0});this.saveToStorage()}recordSuccess(e){const t=this.getOrCreateItem(e);this.practiceCounter++,t.consecutiveCorrect++,t.totalReviews++,t.lastPracticedAt=this.practiceCounter,t.consecutiveCorrect>=this.GRADUATION_THRESHOLD?(t.isCompleted=!0,t.nextReviewAt=Number.MAX_SAFE_INTEGER):this.scheduleNextReview(t),this.saveToStorage()}recordFailure(e){const t=this.getOrCreateItem(e);this.practiceCounter++,t.consecutiveCorrect=0,t.totalReviews++,t.lastPracticedAt=this.practiceCounter,t.currentInterval=this.REINFORCE_INTERVAL,t.nextReviewAt=this.practiceCounter+this.REINFORCE_INTERVAL,this.saveToStorage()}scheduleNextReview(e){const t=e.consecutiveCorrect;t<=this.INITIAL_INTERVALS.length?e.currentInterval=this.INITIAL_INTERVALS[t-1]:e.currentInterval=Math.min(Math.floor(e.currentInterval*1.5),this.MAX_INTERVAL),e.nextReviewAt=this.practiceCounter+e.currentInterval}getNextIndex(){const e=this.getDueItems();if(e.length>0)return e[0].index;for(;this.currentLearningIndex<this.totalGroups;){const t=this.items.get(this.currentLearningIndex);if(!t||!t.isCompleted){const a=this.currentLearningIndex;return this.currentLearningIndex++,a}this.currentLearningIndex++}for(const[t,a]of this.items.entries())if(!a.isCompleted)return t;return null}getDueItems(){const e=[];for(const t of this.items.values())!t.isCompleted&&t.nextReviewAt>0&&this.practiceCounter>=t.nextReviewAt&&e.push(t);return e.sort((t,a)=>{if(t.consecutiveCorrect===0&&a.consecutiveCorrect>0)return-1;if(a.consecutiveCorrect===0&&t.consecutiveCorrect>0)return 1;const V=this.practiceCounter-t.nextReviewAt;return this.practiceCounter-a.nextReviewAt-V}),e}isFirstTime(e){const t=this.items.get(e);return!t||t.totalReviews===0}isCompleted(){if(this.totalGroups===0)return!1;for(let e=0;e<this.totalGroups;e++){const t=this.items.get(e);if(!t||!t.isCompleted)return!1}return!0}getOrCreateItem(e){let t=this.items.get(e);return t||(t={index:e,consecutiveCorrect:0,totalReviews:0,isCompleted:!1,nextReviewAt:0,currentInterval:0,lastPracticedAt:0},this.items.set(e,t)),t}getProgressStats(){let e=0,t=0;for(let a=0;a<this.totalGroups;a++)this.items.has(a)||this.items.set(a,{index:a,consecutiveCorrect:0,totalReviews:0,isCompleted:!1,nextReviewAt:0,currentInterval:0,lastPracticedAt:0});for(const a of this.items.values())a.totalReviews>0&&e++,a.isCompleted&&t++;return{practiced:e,mastered:t,total:this.totalGroups,percentage:this.totalGroups>0?e/this.totalGroups*100:0}}reset(){this.items.clear(),this.currentLearningIndex=0,this.practiceCounter=0;for(let e=0;e<this.totalGroups;e++)this.items.set(e,{index:e,consecutiveCorrect:0,totalReviews:0,isCompleted:!1,nextReviewAt:0,currentInterval:0,lastPracticedAt:0});typeof localStorage<"u"&&localStorage.removeItem(this.storageKey)}getScheduleDebugInfo(){const e=Array.from(this.items.values()).filter(a=>a.isCompleted).length,t=this.getDueItems().length;return`ç·´ç¿’è¨ˆæ•¸: ${this.practiceCounter}, åˆ°æœŸé …ç›®: ${t}, ç•¶å‰å­¸ç¿’ç´¢å¼•: ${this.currentLearningIndex}/${this.totalGroups}, å·²å®Œæˆ: ${e}`}saveToStorage(){if(typeof localStorage<"u"){const e={items:Array.from(this.items.entries()),currentLearningIndex:this.currentLearningIndex,practiceCounter:this.practiceCounter,totalGroups:this.totalGroups};localStorage.setItem(this.storageKey,JSON.stringify(e))}}loadFromStorage(){if(typeof localStorage<"u"){const e=localStorage.getItem(this.storageKey);if(e)try{const t=JSON.parse(e);this.items=new Map(t.items||[]),this.currentLearningIndex=t.currentLearningIndex||0,this.practiceCounter=t.practiceCounter||0,this.totalGroups=t.totalGroups||0}catch(t){console.warn("è¼‰å…¥å­˜å„²æ•¸æ“šå¤±æ•—:",t)}}}}const ke={key:0,class:"text-center py-16"},Ie={class:"mb-8"},Se={class:"text-xl text-gray-600 dark:text-gray-400 mb-8"},Re={class:"relative"},Ae={key:0,class:"text-red-600 dark:text-red-400"},_e=["title"],Le={class:"flex items-center gap-1"},Te={class:"flex items-center gap-1"},Ge={key:1,class:"text-blue-600 dark:text-blue-400 font-medium"},Ee=re({__name:"TrainCardGroup",props:{name:{},cardGroups:{},chaifenMap:{},mode:{},supplement:{type:Boolean},ming:{type:Boolean},isFrequencyOrder:{type:Boolean},onToggleSort:{type:Function},onReset:{type:Function}},setup(C){const e=C,{name:t,cardGroups:a,mode:V,supplement:m,ming:M,isFrequencyOrder:A,onToggleSort:E,onReset:D}=e;console.log(`è¼‰å…¥åˆ†çµ„ç·´ç¿’æœƒè©±: ${t}`);const y=new se(t),_=p(0),N=p(),k=p(""),h=p(!1),w=p(!0),$=p(0),L=p(!1),z=p(0),H=p(!1);p(10);const l=p([]);p(0);const u=p(0);p(2e3);const g=()=>{L.value=!0},T=()=>{D&&(D(),L.value=!1,setTimeout(()=>{window.location.reload()},100))},b=()=>{L.value=!1},r=p(typeof window<"u"?window.innerWidth:1024),I=()=>{r.value=window.innerWidth};J(()=>{typeof window<"u"&&window.addEventListener("resize",I),P(()=>{var s;(s=N.value)==null||s.focus()}),document.addEventListener("keydown",U),q()}),Y(()=>{typeof window<"u"&&window.removeEventListener("resize",I),document.removeEventListener("keydown",U)});const v=O(()=>{if(!x.value)return"text-8xl";const s=x.value.zigens.length,o=r.value<768,f=r.value<1024;return o?s<=2?"text-6xl":s<=4?"text-5xl":"text-4xl":f?s<=2?"text-8xl":s<=4?"text-7xl":"text-6xl":s<=2?"text-9xl":s<=4?"text-8xl":"text-7xl"}),B=O(()=>{if(!x.value)return"gap-8 lg:gap-12";const s=x.value.zigens.length;return r.value<768?s>4?"gap-1":s>2?"gap-2":"gap-3":s>4?"gap-6":"gap-8 lg:gap-12"}),x=O(()=>a[_.value]||null);O(()=>a.length);const j=O(()=>{z.value;const s=y.getProgressStats();return{current:s.practiced,total:s.total,mastered:s.mastered,percentage:s.percentage.toFixed(1)}}),ne=O(()=>j.value.percentage),oe=O(()=>(z.value,y.isCompleted()));ve(k,s=>{if(!x.value)return;const o=s.trim().toLowerCase(),f=x.value.code.toLowerCase();o.length>=f.length&&(o===f?ae():h.value||X())});const ae=()=>{x.value&&(w.value=!0,y.recordSuccess(_.value),z.value++,q())},X=()=>{x.value&&(w.value=!1,$.value++,h.value=!0,y.recordFailure(_.value),z.value++,k.value="",P(()=>{var s;(s=N.value)==null||s.focus()}))},q=()=>{const s=y.getNextIndex();if(s!==null)_.value=s;else return;w.value=!0,$.value=0,k.value="",y.isFirstTime(_.value)?h.value=!0:h.value=!1,P(()=>{var o;(o=N.value)==null||o.focus()})},le=()=>{H.value||(y.reset(),_.value=0,k.value="",h.value=!1,w.value=!0,$.value=0,l.value=[],u.value=0,y.initializeWithGroupCount(a.length),q(),z.value++,l.value.push(`[${new Date().toLocaleTimeString()}] å­¸ç¿’é€²åº¦å·²é‡ç½®`))},ie=()=>{le()},U=s=>{s.key==="Escape"&&!h.value&&(X(),s.preventDefault())},Q=s=>{const o=Ce(s,e.chaifenMap),f=r.value<768,K=r.value<1024;let W=4;return f?W=2:K&&(W=3),o.slice(0,W).split("").join("")};return J(()=>{y.initializeWithGroupCount(a.length),P(()=>{var s;(s=N.value)==null||s.focus()}),document.addEventListener("keydown",U),q()}),Y(()=>{document.removeEventListener("keydown",U)}),(s,o)=>(d(),c(ee,null,[oe.value?(d(),c("div",ke,[n("div",Ie,[o[3]||(o[3]=n("div",{class:"text-6xl mb-4"},"ğŸ‰",-1)),o[4]||(o[4]=n("h2",{class:"text-4xl font-bold mb-2"},"æ­å–œä½ å®Œæˆç·´ç¿’ï¼",-1)),n("p",Se," ä½ å·²ç¶“å®Œæˆäº† "+R(G(a).length)+" å€‹å­—æ ¹çµ„çš„ç·´ç¿’ã€‚ æ„Ÿè¬ä½ çš„åŠªåŠ›å’Œå …æŒï¼Œç‚ºä¸­è¯æ–‡æ˜å’Œæ¼¢å­—çš„å‚³æ‰¿åˆå¢æ·»äº†ä¸€ä»½åŠ›é‡ï¼ ",1)]),n("div",{class:"space-y-4"},[n("button",{onClick:ie,class:"px-8 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 font-medium"}," æƒ³è¦å†è¨“ç·´ä¸€è¼ªå—ï¼Ÿ "),o[5]||(o[5]=n("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," ç¹¼çºŒç·´ç¿’ä»¥éå›ºè¨˜æ†¶ ",-1))])])):x.value?(d(),c("div",{key:1,class:i(["mx-auto p-6 space-y-6",r.value<768?"max-w-sm p-3 space-y-3":"max-w-2xl"])},[n("div",Re,[n("div",{class:i(["text-center text-gray-600 dark:text-gray-400",r.value<768?"text-xs":"text-sm"])},[n("div",{class:i(["flex justify-between items-center",r.value<768?"mb-1":"mb-2"])},[n("span",null,"å·²ç·´ç¿’: "+R(j.value.current)+" / "+R(j.value.total)+" ("+R(j.value.percentage)+"%) | å·²æŒæ¡: "+R(j.value.mastered),1),$.value>0?(d(),c("span",Ae,"éŒ¯èª¤æ¬¡æ•¸: "+R($.value),1)):F("",!0)],2),n("div",{class:i(["w-full bg-gray-200 dark:bg-gray-700 rounded-full",r.value<768?"h-1.5":"h-2"])},[n("div",{class:i(["bg-blue-500 dark:bg-blue-400 rounded-full transition-all duration-300",r.value<768?"h-1.5":"h-2"]),style:pe(`width: ${ne.value}%`)},null,6)],2)],2)]),n("div",{class:i(["w-full shadow-lg rounded-2xl transition-all duration-300 transform relative",{"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800":!w.value,"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800":w.value},"border-2 hover:shadow-xl"])},[n("div",{class:i(["absolute flex gap-2 z-10",r.value<768?"bottom-2 right-2":"bottom-4 right-4"])},[G(E)?(d(),c("button",{key:0,onClick:o[0]||(o[0]=(...f)=>G(E)&&G(E)(...f)),class:i(["rounded-full font-medium transition-all duration-200 flex items-center justify-center shadow-md",r.value<768?"w-6 h-6 text-xs":"w-8 h-8 text-xs",G(A)?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200"]),title:G(A)?"å­—é »åº (é»æ“Šåˆ‡æ›åˆ°å­—å…¸åº)":"å­—å…¸åº (é»æ“Šåˆ‡æ›åˆ°å­—é »åº)"},[(d(),c("svg",{class:i(r.value<768?"w-2 h-2":"w-3 h-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[6]||(o[6]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"},null,-1)])],2))],10,_e)):F("",!0),G(D)?(d(),c("button",{key:1,onClick:g,class:i(["rounded-full bg-red-500 hover:bg-red-600 text-white font-medium transition-all duration-200 flex items-center justify-center shadow-md",r.value<768?"w-6 h-6 text-xs":"w-8 h-8 text-xs"]),title:"é‡æ–°é–‹å§‹è¨“ç·´"},[(d(),c("svg",{class:i(r.value<768?"w-2 h-2":"w-3 h-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[7]||(o[7]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],2)):F("",!0)],2),n("div",{class:i(["text-center",r.value<768?"py-4":"py-12"])},[n("div",{class:i(["flex justify-center items-center flex-wrap",r.value<768?"mb-4":"mb-12",B.value])},[(d(!0),c(ee,null,fe(x.value.zigens,(f,K)=>(d(),c("div",{key:K,class:"flex flex-col items-center group"},[n("div",{class:i(["zigen-font transform transition-all duration-300 group-hover:scale-110",r.value<768?"mb-1":"mb-4",v.value,{"text-red-500 dark:text-red-400":!w.value,"text-blue-700 dark:text-blue-300":w.value}])},R(f.font),3),h.value?(d(),c("div",{key:0,class:i(["text-sm text-gray-600 dark:text-gray-300 font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",r.value<768?"text-xs px-1 py-0.5":""])},R(f.ma),3)):F("",!0),Q(f.font)?(d(),c("div",{key:1,class:i(["text-gray-600 dark:text-gray-300 font-medium tracking-tight zigen-font",r.value<768?"mt-0.5":"mt-2",{"text-xs":r.value<768,"text-base":r.value>=768&&r.value<1024,"text-lg":r.value>=1024}])},R(Q(f.font)),3)):F("",!0)]))),128))],2)],2),n("div",{class:i(["flex justify-center",r.value<768?"pb-3":"pb-8"])},[me(n("input",{ref_key:"inputElement",ref:N,"onUpdate:modelValue":o[1]||(o[1]=f=>k.value=f),type:"text",placeholder:"ç·¨ç¢¼",class:i(["text-center border-2 rounded-xl font-mono","transition-all duration-300 focus:outline-none focus:ring-4",r.value<768?"px-3 py-2 text-lg w-32":"px-6 py-4 text-2xl w-48",{"border-red-300 focus:border-red-500 focus:ring-red-200 bg-red-50 dark:border-red-700 dark:focus:border-red-500 dark:focus:ring-red-900/50 dark:bg-red-900/20 dark:text-white":!w.value,"border-blue-300 focus:border-blue-500 focus:ring-blue-200 bg-white dark:border-blue-700 dark:focus:border-blue-500 dark:focus:ring-blue-900/50 dark:bg-gray-800 dark:text-white":w.value}])},null,2),[[xe,k.value]])],2),n("div",{class:i(["text-center transition-all duration-300",r.value<768?"pb-3":"pb-8",{"opacity-0 transform translate-y-2":!h.value,"opacity-100":h.value}])},[n("div",{class:i(["inline-block bg-gray-100 dark:bg-gray-800 rounded-lg",r.value<768?"px-2 py-1":"px-4 py-2"])},[n("span",{class:i(["text-gray-800 dark:text-gray-200",r.value<768?"text-sm":""])},"ç­”æ¡ˆæ˜¯",2),n("span",{class:i(["font-mono font-bold text-blue-600 dark:text-blue-400",r.value<768?"text-lg":"text-xl"])},R(x.value.code),3)],2)],2)],2),n("div",{class:i(["text-center text-gray-500 dark:text-gray-400 space-y-1",r.value<768?"text-xs":"text-sm"])},[h.value?(d(),c("div",Ge," ç¹¼çºŒè¼¸å…¥æ­£ç¢ºç·¨ç¢¼ ")):(d(),c("div",{key:0,class:i(["flex items-center justify-center",r.value<768?"gap-2 flex-col":"gap-4"])},[n("span",Le,[n("kbd",{class:i(["bg-gray-100 dark:bg-gray-800 dark:text-gray-300 rounded",r.value<768?"px-1 py-0.5 text-xs":"px-2 py-1 text-xs"])},"è¼¸å…¥",2),o[8]||(o[8]=te(" è‡ªå‹•æª¢æŸ¥ ",-1))]),n("span",Te,[n("kbd",{class:i(["bg-gray-100 dark:bg-gray-800 dark:text-gray-300 rounded",r.value<768?"px-1 py-0.5 text-xs":"px-2 py-1 text-xs"])},"Esc",2),o[9]||(o[9]=te(" é¡¯ç¤ºç­”æ¡ˆ ",-1))])],2))],2)],2)):F("",!0),L.value?(d(),c("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:b},[n("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm mx-4 shadow-xl",onClick:o[2]||(o[2]=he(()=>{},["stop"]))},[o[10]||(o[10]=ye('<div class="flex items-center gap-3 mb-4" data-v-a42669f4><div class="w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center" data-v-a42669f4><svg class="w-6 h-6 text-orange-600 dark:text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-a42669f4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z" data-v-a42669f4></path></svg></div><div data-v-a42669f4><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100" data-v-a42669f4>ç¢ºèªé‡ç½®</h3><p class="text-sm text-gray-600 dark:text-gray-400" data-v-a42669f4>æ‚¨ç¢ºå®šè¦é‡æ–°é–‹å§‹è¨“ç·´å—ï¼Ÿ</p></div></div><p class="text-sm text-gray-600 dark:text-gray-400 mb-6" data-v-a42669f4> é€™å°‡æ¸…é™¤ç•¶å‰çš„å­¸ç¿’é€²åº¦å’Œçµ±è¨ˆæ•¸æ“šï¼Œç„¡æ³•æ¢å¾©ã€‚ </p>',2)),n("div",{class:"flex gap-3 justify-end"},[n("button",{onClick:b,class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"}," å–æ¶ˆ "),n("button",{onClick:T,class:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors"}," ç¢ºèªé‡ç½® ")])])])):F("",!0)],64))}}),Ne=we(Ee,[["__scopeId","data-v-a42669f4"]]),$e={key:0},ze={key:1,class:"text-gray-700 dark:text-gray-300 text-center"},je=re({__name:"ZigenTrain",props:{name:{},zigenUrl:{},range:{},mode:{},supplement:{type:Boolean},ming:{type:Boolean}},setup(C){const e=C;let t=e.name+"_zigen_grouped";const a=e.range;a&&(t+=`_${a[0]}_${a[1]}`);const V=`zigen_sort_order_${e.name}`,m=p(!1),M=Z(),A=Z(),E=Z();function D(){try{const l=localStorage.getItem(V);if(l!==null){const u=JSON.parse(l);m.value=u,console.log("è¼‰å…¥ä¿å­˜çš„æ’åºç‹€æ…‹:",u)}}catch(l){console.warn("è¼‰å…¥æ’åºç‹€æ…‹å¤±æ•—:",l)}}function y(){try{localStorage.setItem(V,JSON.stringify(m.value)),console.log("æ’åºç‹€æ…‹å·²ä¿å­˜:",m.value)}catch(l){console.warn("ä¿å­˜æ’åºç‹€æ…‹å¤±æ•—:",l)}}const _=["å£","ä¸€","æœˆ","ä¸¶","æ—¥","äºº","äº»","æ‰Œ","ç™½","åœŸ","ä¸·","äºŒ","åˆ","ä¸¿","å®€","æœ¨","å°š","è¾¶","å°","å†–","å¶","å¿ƒ","æ°µ","å…«","å¥³","å¤§","è‰¹","ğ ‚‡","åŒ•","å¯¸","ä¹Ÿ","ä¹™","æˆˆ","ç›®","è® ","ä¸","é¾°","é˜","ç«¹","äº†","å","å¤‚","ç‹","åˆ‚","å„¿","åŠ›","å‡µ","å†‚","å­","æ–¤","ç«","ç±³","ä¸","å½","çºŸ","æ–‡","ç«‹","å£«","å¤•","ä¹‚","é—¨","åœ","è‡ª","å°¤","å½³","ç¾Š","æ­¢","ç¦¾","è´","å°¸","å·¥","ä¹š","ä¸Š","å›—","è‡³","æ‰‹","ğ¬º°","è‰®","è½¦","çŸ³","ç”°","å·±","å‡ ","ç‰›","è§","èµ°","ç”²","ä¸”","å½¡","çŠ¬","å·¾","è¥¿","æ–¹","åˆ€","æ®³","ä¸ƒ","å¼“","å·´","çŸ¢","ç¤º"],N=["é³¥","çƒ","é­š","é¦¬","é¢¨","ä¾†","è»Š","é•·","é–€","é¬¥","é½’","é£›","è¦‹","è²","é¹µ","åƒ‰","éŸ‹","å’¼","é»½"],k=l=>{switch(e.mode){case"A":return l[0];case"a":return l[1];case"both":return l;default:return}};function h(l){for(const u of l.zigens){const g=_.indexOf(u.font);if(g!==-1)return g}for(const u of l.zigens){const g=N.indexOf(u.font);if(g!==-1)return 1e4+g}return 5e3}function w(l){return[...l].sort((u,g)=>{const T=h(u),b=h(g);return T-b})}function $(){console.log("åˆ‡æ›æ’åºæ¨¡å¼è¢«èª¿ç”¨ï¼Œç•¶å‰ç‹€æ…‹:",m.value),m.value=!m.value,console.log("åˆ‡æ›å¾Œç‹€æ…‹:",m.value),y(),L(),console.log("æ’åºæ‡‰ç”¨å®Œæˆï¼ŒæŒ‰éˆ•æ‡‰è©²é¡¯ç¤ºç‚º:",m.value?"æ©™è‰²ï¼ˆå­—é »åºï¼‰":"ç°è‰²ï¼ˆå­—å…¸åºï¼‰"),setTimeout(()=>{window.location.reload()},100)}function L(){M.value?(m.value?(A.value=w(M.value),console.log("å·²åˆ‡æ›åˆ°å­—é »åºï¼Œé‡æ–°æ’åºäº†",A.value.length,"å€‹å­—æ ¹çµ„")):(A.value=[...M.value],console.log("å·²åˆ‡æ›åˆ°å­—å…¸åºï¼Œæ¢å¾©åŸå§‹é †åº")),P(()=>{console.log("æ’åºæ›´æ–°å®Œæˆï¼Œç•¶å‰é †åº:",A.value.slice(0,3).map(l=>l.code))})):console.warn("originalCardGroups æœªåˆå§‹åŒ–ï¼Œç„¡æ³•æ‡‰ç”¨æ’åº")}function z(l){var b,r;const u=[];let g=0;const T=[];console.log("=== å¼€å§‹åˆ†ç»„å­—æ ¹ ==="),console.log("è¾“å…¥å­—æ ¹æ€»æ•°:",l.length),console.log("ç»ƒä¹ æ¨¡å¼:",e.mode);for(let I=0;I<l.length;I++){const v=l[I],B=(b=k(v.ma))==null?void 0:b.toLowerCase();if(!B){g++,T.push({font:v.font,ma:v.ma,reason:`getCodeè¿”å›ç©ºå€¼ï¼Œmode=${e.mode}`}),console.warn(`è·³è¿‡å­—æ ¹ ${I}: ${v.font} (${v.ma}) - getCodeè¿”å›: ${k(v.ma)}`);continue}const x=I>0?l[I-1]:null;(x?(r=k(x.ma))==null?void 0:r.toLowerCase():null)===B&&u.length>0&&u[u.length-1].code===B?u[u.length-1].zigens.push(v):u.push({code:B,zigens:[v]})}return console.log("=== åˆ†ç»„å®Œæˆ ==="),console.log("æœ‰æ•ˆç»„æ•°:",u.length),console.log("è·³è¿‡çš„å­—æ ¹æ•°:",g),g>0&&(console.log("è·³è¿‡çš„å­—æ ¹è¯¦æƒ…:",T),console.log("å‰10ä¸ªè·³è¿‡çš„å­—æ ¹åŸå› ç»Ÿè®¡:"),T.slice(0,10).map(v=>`${v.font}(${v.ma}): ${v.reason}`).forEach(v=>console.log(`  - ${v}`))),u}function H(){M.value&&(new se(t).reset(),m.value=!1,y(),L(),console.log("è¨“ç·´å·²é‡ç½®ï¼Œæ’åºç‹€æ…‹é‡ç½®ç‚ºå­—å…¸åº"))}return J(async()=>{D();const g=["joy","light","star","ming","wafel"].includes(e.name)?"/chaifen.json":`/chaifen-${e.name}.json`;console.log(`å­—æ ¹è®­ç»ƒæ–¹æ¡ˆ: ${e.name}, ä½¿ç”¨æ‹†åˆ†æ–‡ä»¶: ${g}`),E.value=await de(g);let b=[...(await ge(e.zigenUrl)).values()];a&&(b=b.slice(a[0],a[1]));const r=z(b);M.value=r,L(),console.log(`å­—æ ¹ç·´ç¿’ï¼šå…± ${r.length} å€‹ç·¨ç¢¼çµ„ï¼ŒåŒ…å« ${b.length} å€‹å­—æ ¹ï¼Œç•¶å‰${m.value?"å­—é »åº":"å­—å…¸åº"}`)}),(l,u)=>A.value&&E.value?(d(),c("div",$e,[be(Ne,{name:G(t),"card-groups":A.value,"chaifen-map":E.value,mode:"g",supplement:e.supplement??!1,ming:e.ming??!1,"is-frequency-order":m.value,"on-toggle-sort":$,"on-reset":H},null,8,["name","card-groups","chaifen-map","supplement","ming","is-frequency-order"])])):(d(),c("h2",ze," ä¸‹è¼‰è³‡æ–™ä¸­â€¦â€¦ "))}});export{je as _};
