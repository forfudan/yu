var se=Object.defineProperty;var ne=(T,e,t)=>e in T?se(T,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):T[e]=t;var $=(T,e,t)=>ne(T,typeof e!="symbol"?e+"":e,t);import{b as ae,f as le}from"./share.D5aqWrzv.js";import{d as te,h as _,l as Z,R as U,aa as Q,k as j,v as ie,c as m,o as h,F as X,e as P,n as c,m as i,t as M,O as ce,p as D,C as ue,a3 as de,a4 as ge,a as ee,a0 as ve,a2 as fe,_ as pe,E as K,H as me}from"./framework.D5VGNaZP.js";import{f as he}from"./share.BaGPHDUM.js";class re{constructor(e){$(this,"items",new Map);$(this,"storageKey");$(this,"practiceCount",0);$(this,"NEW_CARD_RATIO",.3);$(this,"INITIAL_INTERVALS",[4,12,36]);$(this,"GRADUATION_THRESHOLD",3);$(this,"EASY_MULTIPLIER",2.5);$(this,"GOOD_MULTIPLIER",2);$(this,"HARD_MULTIPLIER",1.3);this.storageKey=`spaced_repetition_${e}`,this.loadFromStorage()}recordSuccess(e){const t=this.getOrCreateItem(e);if(this.practiceCount++,t.consecutiveCorrect++,t.totalReviews++,t.lastPracticed=this.practiceCount,t.isNew=!1,t.consecutiveCorrect<=this.INITIAL_INTERVALS.length){const o=t.consecutiveCorrect-1;t.currentInterval=this.INITIAL_INTERVALS[o]||this.INITIAL_INTERVALS[this.INITIAL_INTERVALS.length-1]}else t.currentInterval=Math.floor(t.currentInterval*this.GOOD_MULTIPLIER),t.currentInterval=Math.min(t.currentInterval,50);t.nextReviewAt=this.practiceCount+t.currentInterval,this.items.set(e,t),this.saveToStorage()}recordFailure(e){const t=this.getOrCreateItem(e);this.practiceCount++,t.consecutiveCorrect=0,t.totalReviews++,t.errorCount++,t.lastPracticed=this.practiceCount,t.isNew=!1,t.currentInterval=1,t.nextReviewAt=this.practiceCount+t.currentInterval,this.items.set(e,t),this.saveToStorage()}getNext(e){const t=[],o=[];for(const f of e){const g=this.items.get(f.code);g?this.practiceCount>=g.nextReviewAt&&g.consecutiveCorrect<this.GRADUATION_THRESHOLD&&o.push(f):t.push(f)}return o.length>0?o[0]:t.length>0?t[0]:null}calculatePriority(e){let t=1e3;t+=e.errorCount*500;const o=this.practiceCount-e.nextReviewAt;return t+=Math.max(0,o)*100,e.consecutiveCorrect===0&&(t+=200),t}getStats(){let e=0,t=0,o=0;for(const f of this.items.values())f.consecutiveCorrect>=this.GRADUATION_THRESHOLD?e++:f.errorCount>=3?o++:t++;return{total:this.items.size,mastered:e,learning:t,difficult:o}}getItemStats(e){return this.items.get(e)||null}isFirstTime(e){const t=this.items.get(e);return!t||t.isNew||t.totalReviews===0}getCurrentProgress(){const e=this.items.size,o=Math.max(e*4,this.practiceCount+50);return{practiceCount:this.practiceCount,estimatedTotal:o}}getOrCreateItem(e){const t=this.items.get(e);if(t)return t;const o={id:e,nextReviewAt:this.practiceCount+1,consecutiveCorrect:0,totalReviews:0,errorCount:0,lastPracticed:0,isNew:!0,currentInterval:1};return this.items.set(e,o),o}loadFromStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);this.items=new Map(Object.entries(t.items||{})),this.practiceCount=t.practiceCount||0}}catch(e){console.warn("載入調度數據失敗:",e)}}saveToStorage(){try{const e={items:Object.fromEntries(this.items),practiceCount:this.practiceCount};localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.warn("保存調度數據失敗:",e)}}reset(){this.items.clear(),this.practiceCount=0,localStorage.removeItem(this.storageKey)}getProgress(){const e=this.items.size,o=Math.max(e*4,this.practiceCount+50);return{practiceCount:this.practiceCount,estimatedTotal:o}}simulate(e=250,t=.1,o=5e3,f=!1){const g=new Map(this.items),O=this.practiceCount;this.items.clear(),this.practiceCount=0,f&&(console.log(`🚀 開始模擬 ${e} 個項目的學習過程`),console.log(`📊 錯誤率: ${(t*100).toFixed(1)}%`),console.log(`⚙️ 算法參數: 間隔=${this.INITIAL_INTERVALS.join(",")}, 畢業閾值=${this.GRADUATION_THRESHOLD}`),console.log(""));const C=Array.from({length:e},(u,b)=>({code:`item_${b+1}`}));let p=0;const E=Date.now();for(;p<o;){const u=this.getNext(C);if(!u){const L=Array.from(this.items.values()).filter(s=>s.consecutiveCorrect<this.GRADUATION_THRESHOLD);if(L.length===0){f&&console.log("🎉 所有項目都已掌握！");break}else{const s=L.map(n=>n.nextReviewAt).filter(n=>n>this.practiceCount);if(s.length>0){const n=Math.min(...s);this.practiceCount=n,f&&p%100===0&&console.log(`⏭️  跳到練習位置 ${this.practiceCount}`);continue}else break}}if(p++,Math.random()>t?(this.recordSuccess(u.code),f&&p%200===0&&console.log(`✅ 練習 ${p}: ${u.code} 正確`)):(this.recordFailure(u.code),f&&p%200===0&&console.log(`❌ 練習 ${p}: ${u.code} 錯誤`)),f&&p%500===0){const L=this.getStats(),s=(L.mastered/e*100).toFixed(1);console.log(`📈 進度報告 - 練習: ${p}, 掌握: ${L.mastered}/${e} (${s}%)`)}}const I=Date.now(),w=this.getStats(),S=Array.from(this.items.values()),R=S.reduce((u,b)=>u+b.errorCount,0),x=S.reduce((u,b)=>u+b.totalReviews,0)/S.length,y=w.mastered===e,A=y?`優秀 (${(this.practiceCount/e).toFixed(1)}x)`:`未完成 (${p}/${o})`;if(f)if(console.log(`
`+"=".repeat(50)),console.log("🎯 模擬測試完成！"),console.log("=".repeat(50)),console.log(`⏱️  執行時間: ${I-E}ms`),console.log(`🔢 總練習次數: ${this.practiceCount}`),console.log(`📚 項目總數: ${e}`),console.log(`🎯 掌握數量: ${w.mastered}/${e}`),console.log(`📊 完成率: ${(w.mastered/e*100).toFixed(1)}%`),console.log(`❌ 總錯誤次數: ${R}`),console.log(`🔄 平均復習次數: ${x.toFixed(1)}`),console.log(`⚡ 效率評估: ${A}`),console.log("📈 學習統計:"),console.log(`   - 已掌握: ${w.mastered}`),console.log(`   - 學習中: ${w.learning}`),console.log(`   - 困難項: ${w.difficult}`),y){const u=this.practiceCount/e;console.log(`
✨ 結論: 完成 ${e} 個項目需要約 ${this.practiceCount} 次練習`),console.log(`📊 相當於每個項目平均 ${u.toFixed(1)} 次練習`),u<5?console.log("🚀 算法效率極佳！"):u<8?console.log("👍 算法效率良好！"):console.log("⚠️  算法可能需要優化")}else console.log(`
⚠️  警告: 在 ${o} 次迭代內未完成學習`),console.log("💡 建議調整算法參數或增加最大迭代次數");return this.items=g,this.practiceCount=O,{completed:y,totalPractices:this.practiceCount,masteredCount:w.mastered,averageReviewsPerItem:x,totalErrors:R,efficiency:A}}quickSimulate(e=250){const t=this.simulate(e,.1,3e3,!1);return{success:t.completed,practices:t.totalPractices,message:t.completed?`✅ 成功！${e}個項目需要${t.totalPractices}次練習`:"❌ 失敗！需要調整算法參數"}}}const xe={class:"relative"},ye={key:0,class:"text-red-600 dark:text-red-400"},we=["title"],Ce={class:"flex items-center gap-1"},be={class:"flex items-center gap-1"},ke={key:1,class:"text-blue-600 dark:text-blue-400 font-medium"},Ie=te({__name:"TrainCardGroup",props:{name:{},cardGroups:{},chaifenMap:{},mode:{},supplement:{type:Boolean},ming:{type:Boolean},isFrequencyOrder:{type:Boolean},onToggleSort:{type:Function},onReset:{type:Function}},setup(T){const e=T,{name:t,cardGroups:o,mode:f,supplement:g,ming:O,isFrequencyOrder:C,onToggleSort:p,onReset:E}=e;console.log(`載入分組練習會話: ${t}`);const I=new re(t),w=_(0),S=_(),R=_(""),x=_(!1),y=_(!0),A=_(0),u=_(!1),b=_(0),L=()=>{u.value=!0},s=()=>{E&&(E(),u.value=!1,setTimeout(()=>{window.location.reload()},100))},n=()=>{u.value=!1},r=_(typeof window<"u"?window.innerWidth:1024),z=()=>{r.value=window.innerWidth};Z(()=>{typeof window<"u"&&window.addEventListener("resize",z),U(()=>{var a;(a=S.value)==null||a.focus()}),document.addEventListener("keydown",V),q()}),Q(()=>{typeof window<"u"&&window.removeEventListener("resize",z),document.removeEventListener("keydown",V)});const N=j(()=>{if(!v.value)return"text-8xl";const a=v.value.zigens.length,l=r.value<768,d=r.value<1024;return l?a<=2?"text-6xl":a<=4?"text-5xl":"text-4xl":d?a<=2?"text-8xl":a<=4?"text-7xl":"text-6xl":a<=2?"text-9xl":a<=4?"text-8xl":"text-7xl"}),B=j(()=>{if(!v.value)return"gap-8 lg:gap-12";const a=v.value.zigens.length;return r.value<768?a>4?"gap-1":a>2?"gap-2":"gap-3":a>4?"gap-6":"gap-8 lg:gap-12"}),v=j(()=>o[w.value]||null);j(()=>o.length);const F=j(()=>{b.value;const l=I.getStats().total,d=o.length;return{current:l,total:d,percentage:d>0?(l/d*100).toFixed(1):"0"}}),W=j(()=>F.value.percentage);ie(R,a=>{if(!v.value)return;const l=a.trim().toLowerCase(),d=v.value.code.toLowerCase();l.length>=d.length&&(l===d?oe():x.value||J())});const oe=()=>{v.value&&(y.value=!0,I.recordSuccess(v.value.code),b.value++,q())},J=()=>{v.value&&(y.value=!1,A.value++,x.value=!0,I.recordFailure(v.value.code),b.value++,R.value="",U(()=>{var a;(a=S.value)==null||a.focus()}))},q=()=>{var d;const a=I.getNext(o);if(a)w.value=o.findIndex(k=>k.code===a.code);else{const k=o.filter(G=>{const H=I.getItemStats(G.code);return!H||H.consecutiveCorrect<3||H.errorCount>0});if(k.length>0){const G=k[Math.floor(Math.random()*k.length)];w.value=o.findIndex(H=>H.code===G.code)}else w.value=Math.floor(Math.random()*o.length)}y.value=!0,A.value=0,R.value="";const l=(d=v.value)==null?void 0:d.code;l&&I.isFirstTime(l)?(x.value=!0,console.log(`字根組 "${l}" 第一次出現，直接顯示答案`)):x.value=!1,U(()=>{var k;(k=S.value)==null||k.focus()})},V=a=>{a.key==="Escape"&&!x.value&&(J(),a.preventDefault())},Y=a=>{const l=he(a,e.chaifenMap),d=r.value<768,k=r.value<1024;let G=4;return d?G=2:k&&(G=3),l.slice(0,G).split("").join("")};return Z(()=>{U(()=>{var a;(a=S.value)==null||a.focus()}),document.addEventListener("keydown",V),q()}),Q(()=>{document.removeEventListener("keydown",V)}),(a,l)=>(h(),m(X,null,[v.value?(h(),m("div",{key:0,class:c(["mx-auto p-6 space-y-6",r.value<768?"max-w-sm p-3 space-y-3":"max-w-2xl"])},[i("div",xe,[i("div",{class:c(["text-center text-gray-600 dark:text-gray-400",r.value<768?"text-xs":"text-sm"])},[i("div",{class:c(["flex justify-between items-center",r.value<768?"mb-1":"mb-2"])},[i("span",null,"已練習字根組: "+M(F.value.current)+" / "+M(F.value.total)+" (進度 "+M(F.value.percentage)+"%)",1),A.value>0?(h(),m("span",ye,"錯誤次數: "+M(A.value),1)):P("",!0)],2),i("div",{class:c(["w-full bg-gray-200 dark:bg-gray-700 rounded-full",r.value<768?"h-1.5":"h-2"])},[i("div",{class:c(["bg-blue-500 dark:bg-blue-400 rounded-full transition-all duration-300",r.value<768?"h-1.5":"h-2"]),style:ce(`width: ${W.value}%`)},null,6)],2)],2)]),i("div",{class:c(["w-full shadow-lg rounded-2xl transition-all duration-300 transform relative",{"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800":!y.value,"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800":y.value},"border-2 hover:shadow-xl"])},[i("div",{class:c(["absolute flex gap-2 z-10",r.value<768?"bottom-2 right-2":"bottom-4 right-4"])},[D(p)?(h(),m("button",{key:0,onClick:l[0]||(l[0]=()=>{console.log("排序按鈕被點擊，當前狀態:",D(C)),D(p)()}),class:c(["rounded-full font-medium transition-all duration-200 flex items-center justify-center shadow-md",r.value<768?"w-6 h-6 text-xs":"w-8 h-8 text-xs",D(C)?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200"]),title:D(C)?"字頻序 (點擊切換到字典序)":"字典序 (點擊切換到字頻序)"},[(h(),m("svg",{class:c(r.value<768?"w-2 h-2":"w-3 h-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[3]||(l[3]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"},null,-1)])],2))],10,we)):P("",!0),D(E)?(h(),m("button",{key:1,onClick:L,class:c(["rounded-full bg-red-500 hover:bg-red-600 text-white font-medium transition-all duration-200 flex items-center justify-center shadow-md",r.value<768?"w-6 h-6 text-xs":"w-8 h-8 text-xs"]),title:"重新開始訓練"},[(h(),m("svg",{class:c(r.value<768?"w-2 h-2":"w-3 h-3"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[4]||(l[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],2)):P("",!0)],2),i("div",{class:c(["text-center",r.value<768?"py-4":"py-12"])},[i("div",{class:c(["flex justify-center items-center flex-wrap",r.value<768?"mb-4":"mb-12",B.value])},[(h(!0),m(X,null,ue(v.value.zigens,(d,k)=>(h(),m("div",{key:k,class:"flex flex-col items-center group"},[i("div",{class:c(["zigen-font transform transition-all duration-300 group-hover:scale-110",r.value<768?"mb-1":"mb-4",N.value,{"text-red-500 dark:text-red-400":!y.value,"text-blue-700 dark:text-blue-300":y.value}])},M(d.font),3),x.value?(h(),m("div",{key:0,class:c(["text-sm text-gray-600 dark:text-gray-300 font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",r.value<768?"text-xs px-1 py-0.5":""])},M(d.ma),3)):P("",!0),Y(d.font)?(h(),m("div",{key:1,class:c(["text-gray-600 dark:text-gray-300 font-medium tracking-tight zigen-font",r.value<768?"mt-0.5":"mt-2",{"text-xs":r.value<768,"text-base":r.value>=768&&r.value<1024,"text-lg":r.value>=1024}])},M(Y(d.font)),3)):P("",!0)]))),128))],2)],2),i("div",{class:c(["flex justify-center",r.value<768?"pb-3":"pb-8"])},[de(i("input",{ref_key:"inputElement",ref:S,"onUpdate:modelValue":l[1]||(l[1]=d=>R.value=d),type:"text",placeholder:"編碼",class:c(["text-center border-2 rounded-xl font-mono","transition-all duration-300 focus:outline-none focus:ring-4",r.value<768?"px-3 py-2 text-lg w-32":"px-6 py-4 text-2xl w-48",{"border-red-300 focus:border-red-500 focus:ring-red-200 bg-red-50 dark:border-red-700 dark:focus:border-red-500 dark:focus:ring-red-900/50 dark:bg-red-900/20 dark:text-white":!y.value,"border-blue-300 focus:border-blue-500 focus:ring-blue-200 bg-white dark:border-blue-700 dark:focus:border-blue-500 dark:focus:ring-blue-900/50 dark:bg-gray-800 dark:text-white":y.value}])},null,2),[[ge,R.value]])],2),i("div",{class:c(["text-center transition-all duration-300",r.value<768?"pb-3":"pb-8",{"opacity-0 transform translate-y-2":!x.value,"opacity-100":x.value}])},[i("div",{class:c(["inline-block bg-gray-100 dark:bg-gray-800 rounded-lg",r.value<768?"px-2 py-1":"px-4 py-2"])},[i("span",{class:c(["text-gray-800 dark:text-gray-200",r.value<768?"text-sm":""])},"答案是",2),i("span",{class:c(["font-mono font-bold text-blue-600 dark:text-blue-400",r.value<768?"text-lg":"text-xl"])},M(v.value.code),3)],2)],2)],2),i("div",{class:c(["text-center text-gray-500 dark:text-gray-400 space-y-1",r.value<768?"text-xs":"text-sm"])},[x.value?(h(),m("div",ke," 繼續輸入正確編碼 ")):(h(),m("div",{key:0,class:c(["flex items-center justify-center",r.value<768?"gap-2 flex-col":"gap-4"])},[i("span",Ce,[i("kbd",{class:c(["bg-gray-100 dark:bg-gray-800 dark:text-gray-300 rounded",r.value<768?"px-1 py-0.5 text-xs":"px-2 py-1 text-xs"])},"輸入",2),l[5]||(l[5]=ee(" 自動檢查 ",-1))]),i("span",be,[i("kbd",{class:c(["bg-gray-100 dark:bg-gray-800 dark:text-gray-300 rounded",r.value<768?"px-1 py-0.5 text-xs":"px-2 py-1 text-xs"])},"Esc",2),l[6]||(l[6]=ee(" 顯示答案 ",-1))])],2))],2)],2)):P("",!0),u.value?(h(),m("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n},[i("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm mx-4 shadow-xl",onClick:l[2]||(l[2]=ve(()=>{},["stop"]))},[l[7]||(l[7]=fe('<div class="flex items-center gap-3 mb-4" data-v-1f961a76><div class="w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center" data-v-1f961a76><svg class="w-6 h-6 text-orange-600 dark:text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1f961a76><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z" data-v-1f961a76></path></svg></div><div data-v-1f961a76><h3 class="text-lg font-medium text-gray-900 dark:text-gray-100" data-v-1f961a76>確認重置</h3><p class="text-sm text-gray-600 dark:text-gray-400" data-v-1f961a76>您確定要重新開始訓練嗎？</p></div></div><p class="text-sm text-gray-600 dark:text-gray-400 mb-6" data-v-1f961a76> 這將清除當前的學習進度和統計數據，無法恢復。 </p>',2)),i("div",{class:"flex gap-3 justify-end"},[i("button",{onClick:n,class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"}," 取消 "),i("button",{onClick:s,class:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors"}," 確認重置 ")])])])):P("",!0)],64))}}),Se=pe(Ie,[["__scopeId","data-v-1f961a76"]]),Re={key:0},Te={key:1,class:"text-gray-700 dark:text-gray-300 text-center"},Ne=te({__name:"ZigenTrain",props:{name:{},zigenUrl:{},range:{},mode:{},supplement:{type:Boolean},ming:{type:Boolean}},setup(T){const e=T;let t=e.name+"_zigen_grouped";const o=e.range;o&&(t+=`_${o[0]}_${o[1]}`);const f=`zigen_sort_order_${e.name}`,g=_(!1),O=K(),C=K(),p=K();function E(){try{const s=localStorage.getItem(f);if(s!==null){const n=JSON.parse(s);g.value=n,console.log("載入保存的排序狀態:",n)}}catch(s){console.warn("載入排序狀態失敗:",s)}}function I(){try{localStorage.setItem(f,JSON.stringify(g.value)),console.log("排序狀態已保存:",g.value)}catch(s){console.warn("保存排序狀態失敗:",s)}}const w=["口","一","月","丶","日","人","亻","扌","白","土","丷","二","又","丿","宀","木","尚","辶","小","冖","厶","心","氵","八","女","大","艹","𠂇","匕","寸","也","乙","戈","目","讠","不","龰","阝","竹","了","十","夂","王","刂","儿","力","凵","冂","子","斤","火","米","丁","彐","纟","文","立","士","夕","乂","门","卜","自","尤","彳","羊","止","禾","贝","尸","工","乚","上","囗","至","手","𬺰","艮","车","石","田","己","几","牛","见","走","甲","且","彡","犬","巾","西","方","刀","殳","七","弓","巴","矢","示"],S=["鳥","烏","魚","馬","風","來","車","長","門","鬥","齒","飛","見","貝","鹵","僉","韋","咼","黽"],R=s=>{switch(e.mode){case"A":return s[0];case"a":return s[1];case"both":return s}};function x(s){for(const n of s.zigens){const r=w.indexOf(n.font);if(r!==-1)return r}for(const n of s.zigens){const r=S.indexOf(n.font);if(r!==-1)return 1e4+r}return 5e3}function y(s){return[...s].sort((n,r)=>{const z=x(n),N=x(r);return z-N})}function A(){console.log("切換排序模式被調用，當前狀態:",g.value),g.value=!g.value,console.log("切換後狀態:",g.value),I(),u(),console.log("排序應用完成，按鈕應該顯示為:",g.value?"橙色（字頻序）":"灰色（字典序）"),setTimeout(()=>{window.location.reload()},100)}function u(){O.value?(g.value?(C.value=y(O.value),console.log("已切換到字頻序，重新排序了",C.value.length,"個字根組")):(C.value=[...O.value],console.log("已切換到字典序，恢復原始順序")),U(()=>{console.log("排序更新完成，當前順序:",C.value.slice(0,3).map(s=>s.code))})):console.warn("originalCardGroups 未初始化，無法應用排序")}function b(s){var r,z;const n=[];for(let N=0;N<s.length;N++){const B=s[N],v=(r=R(B.ma))==null?void 0:r.toLowerCase();if(!v)continue;const F=N>0?s[N-1]:null;(F?(z=R(F.ma))==null?void 0:z.toLowerCase():null)===v&&n.length>0&&n[n.length-1].code===v?n[n.length-1].zigens.push(B):n.push({code:v,zigens:[B]})}return n}function L(){O.value&&(new re(t).reset(),g.value=!1,I(),u(),console.log("訓練已重置，排序狀態重置為字典序"))}return Z(async()=>{E(),p.value=await ae("/chaifen.csv");let n=[...(await le(e.zigenUrl)).values()];o&&(n=n.slice(o[0],o[1]));const r=b(n);O.value=r,u(),console.log(`字根練習：共 ${r.length} 個編碼組，包含 ${n.length} 個字根，當前${g.value?"字頻序":"字典序"}`)}),(s,n)=>C.value&&p.value?(h(),m("div",Re,[me(Se,{name:D(t),"card-groups":C.value,"chaifen-map":p.value,mode:"g",supplement:e.supplement??!1,ming:e.ming??!1,"is-frequency-order":g.value,"on-toggle-sort":A,"on-reset":L},null,8,["name","card-groups","chaifen-map","supplement","ming","is-frequency-order"])])):(h(),m("h2",Te," 下載資料中…… "))}});export{Ne as _};
