import{d as we,l as ye,y as Ce,v as xe,j as w,c as s,o,e as E,m as a,n as x,t as _,F as H,C as I,k as O,O as Se,a0 as _e,a8 as ze,_ as Ee}from"./framework.CUT8mDDq.js";import{a as Te,C as Le}from"./share.CH259w72.js";import{h as $e}from"./html2canvas-pro.esm.D5s0lc69.js";class be{static generateFileName(u="æœªå‘½åæ–¹æ¡ˆ",L=!1){const A=new Date().toISOString().split("T")[0].replace(/-/g,"");return`${u}è¼¸å…¥æ³•${L?"å­—æ ¹è¡¨":"å­—æ ¹åœ–"}${A}.png`}static addTemporaryWatermark(u,L="å®‡æµ©ç³»åˆ—è¼¸å…¥æ³• Â· å®˜ç¶²: shurufa.app Â· QQ è¨è«–ç¾¤: 170510762"){const A=document.createElement("div");return A.className="zigen-export-watermark",A.style.cssText=`
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            text-align: center;
            margin-top: 16px;
            font-size: 0.9rem;
            color: #4f46e5;
            font-weight: 500;
            border: 1px solid #d1d5db;
            font-family: 'Noto Serif SC', serif;
            backdrop-filter: blur(4px);
        `,A.textContent=L,u.appendChild(A),A}static removeTemporaryWatermark(u){u&&u.parentNode&&u.parentNode.removeChild(u)}static async exportZigenMapToPNG(u,L="æœªå‘½åæ–¹æ¡ˆ",A=!1,F={}){const{copyToClipboard:se=!0,download:X=!0,scale:J=2,addWatermark:k=!0}=F,b="#ffffff";let h=null;k&&(h=this.addTemporaryWatermark(u));let C,S=[],D,G=[],M=[],q=null,ee=[];try{document.querySelectorAll(".dark").forEach(v=>{const z=v.classList.contains("dark");ee.push({element:v,hadDarkClass:z}),z&&v.classList.remove("dark")}),C=u.querySelectorAll(".layout-toggle-btn, .export-btn"),C.forEach((v,z)=>{const m=v;S[z]=m.style.display,m.style.display="none"}),D=u.querySelectorAll(".text-sm.text-gray-500, .text-xs.text-gray-400"),D.forEach((v,z)=>{var j,$,g;const m=v;((j=m.textContent)!=null&&j.includes("é»æ“Šå­—æ ¹å¯æŸ¥çœ‹ä¾‹å­—")||($=m.textContent)!=null&&$.includes("åˆ‡æ›åœ–è¡¨å½¢æ…‹")||(g=m.textContent)!=null&&g.includes("æŒ‰éµæ’åº"))&&(G[z]=m.style.display,m.style.display="none")}),q=document.createElement("div"),q.className="export-title",q.style.cssText=`
                text-align: center;
                font-size: 1.5rem;
                font-weight: bold;
                margin-bottom: 1.5rem;
                color: #5400a2ff;
                font-family: 'Noto Serif SC', serif;
            `;const oe=u.querySelector(".desktop-list-layout")!==null||u.querySelector(".mobile-key-row")!==null,ue=oe?"å­—æ ¹è¡¨":"å­—æ ¹åœ–";q.textContent=`${L}è¼¸å…¥æ³•${ue}`,u.insertBefore(q,u.firstChild),M.push({element:u,originalStyle:u.style.cssText}),u.style.cssText+=`
                min-width: 1028px !important;    /* å­—æ ¹åœ–çš„æœ€å°å¯¬åº¦ */
                width: auto !important;          
                overflow: visible !important;    
                box-sizing: border-box !important; 
            `;const N=u.querySelector(".keyboard-layout");N&&(M.push({element:N,originalStyle:N.style.cssText}),N.style.cssText+=`
                    min-width: 1028px !important;    
                    width: auto !important;          
                    overflow: visible !important;    
                    box-sizing: border-box !important; 
                `,N.querySelectorAll(".keyboard-key").forEach(g=>{const f=g;M.push({element:f,originalStyle:f.style.cssText}),f.style.cssText+=`
                        width: 96px !important;          /* æŒ‰éµå¡ç‰‡å›ºå®šå¯¬åº¦ */
                        flex: 0 0 96px !important;       /* å›ºå®šå½ˆæ€§ä½ˆå±€ */
                    `}),N.querySelectorAll(".zigen-list").forEach(g=>{const f=g;M.push({element:f,originalStyle:f.style.cssText}),f.style.cssText+=`
                        grid-template-columns: repeat(auto-fill, minmax(16px, max-content)) !important; /* å­—æ ¹æœ€å°å¯¬åº¦ */
                    `}),N.querySelectorAll(".zigen-code").forEach(g=>{const f=g;M.push({element:f,originalStyle:f.style.cssText}),f.style.cssText+=`
                        margin-top: 1px !important;
                        padding-top: 1px !important;
                        min-height: 8px !important;
                        line-height: 1.0 !important;
                    `}),N.querySelectorAll(".zigen-item").forEach(g=>{const f=g;M.push({element:f,originalStyle:f.style.cssText}),f.style.cssText+=`
                        gap: 1px !important;
                        padding: 1px !important;
                    `;const Z=g.querySelector(".zigen-code");Z&&(M.push({element:Z,originalStyle:Z.style.cssText}),Z.style.cssText+=`
                            margin-top: 1px !important;
                            min-height: 2px !important;
                        `)}),N.querySelectorAll(".keyboard-key").forEach(g=>{var Z,ne;const f=(ne=(Z=g.querySelector(".key-label"))==null?void 0:Z.textContent)==null?void 0:ne.toLowerCase();if(["z",";",",",".","/"].includes(f||"")){const Q=g.querySelector(".no-zigen-text");Q&&(M.push({element:Q,originalStyle:Q.style.cssText}),Q.style.cssText=`
                                display: flex !important;
                                flex-direction: column !important;
                                align-items: center !important;
                                justify-content: center !important;
                                text-align: center !important;
                                font-size: 0.7rem !important;
                                height: 100% !important;
                                line-height: 1.3 !important;
                                padding: 0.2rem !important;
                            `,Q.querySelectorAll("div").forEach(le=>{const ae=le;ae.style.cssText=`
                                    writing-mode: horizontal-tb !important;
                                    text-orientation: mixed !important;
                                    white-space: nowrap !important;
                                    margin: 0.1rem 0 !important;
                                    text-align: center !important;
                                    font-size: 0.65rem !important;
                                `}))}})),await new Promise(v=>setTimeout(v,500));const B=u.getBoundingClientRect(),T=Math.max(B.width,u.scrollWidth,1028),K=Math.max(B.height,u.scrollHeight),U=await $e(u,{backgroundColor:b,scale:J,useCORS:!0,allowTaint:!1,logging:!0,width:T,height:K,windowWidth:T,windowHeight:K,scrollX:0,scrollY:0,x:0,y:0,ignoreElements:v=>v.classList.contains("export-btn")||v.classList.contains("layout-toggle-btn")||v.classList.contains("pinned-popup"),foreignObjectRendering:!1,removeContainer:!1,imageTimeout:15e3});this.restoreAllChanges(C,S,D,G,M,q,ee);const W=U.toDataURL("image/png",1),R=this.generateFileName(L,oe);if(se&&this.isClipboardSupported())try{const v=await new Promise(z=>{U.toBlob(m=>{m&&z(m)},"image/png",1)});return await navigator.clipboard.write([new ClipboardItem({"image/png":v})]),console.log("å­—æ ¹åœ–å·²è¤‡è£½åˆ°å‰ªè²¼æ¿"),{success:!0,message:"å­—æ ¹åœ–å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ä¸¦ä¸‹è¼‰",dataUrl:W,filename:R}}catch(v){console.warn("è¤‡è£½åˆ°å‰ªè²¼æ¿å¤±æ•—ï¼Œå°‡åƒ…é€²è¡Œä¸‹è¼‰:",v)}if(X){const v=document.createElement("a");v.download=R,v.href=W,v.style.display="none",document.body.appendChild(v),v.click(),document.body.removeChild(v),console.log("å­—æ ¹åœ–å·²ä¸‹è¼‰:",R)}return{success:!0,message:"å­—æ ¹åœ–å·²ä¸‹è¼‰",dataUrl:W,filename:R}}catch(te){return console.error("å°å‡ºå­—æ ¹åœ–å¤±æ•—:",te),this.restoreAllChanges(C,S,D,G,M,q,ee),{success:!1,message:`å°å‡ºå¤±æ•—: ${te instanceof Error?te.message:"æœªçŸ¥éŒ¯èª¤"}`,dataUrl:"",filename:""}}finally{h&&this.removeTemporaryWatermark(h)}}static restoreAllChanges(u,L,A,F,se,X,J){J.forEach(({element:k,hadDarkClass:b})=>{b&&k.classList.add("dark")}),u.forEach((k,b)=>{const h=k;h.style.display=L[b]}),A.forEach((k,b)=>{const h=k;F[b]!==void 0&&(h.style.display=F[b])}),X&&X.parentNode&&X.remove(),se.forEach(({element:k,originalStyle:b})=>{k.style.cssText=b,k.querySelectorAll("div").forEach(C=>{const S=C;S.style.cssText=""})})}static isClipboardSupported(){return typeof navigator<"u"&&"clipboard"in navigator&&"write"in navigator.clipboard}static getSchemeDisplayName(u){return{joy:"å¿é›²",light:"å…‰è¯",star:"æ˜Ÿé™³",ming:"æ—¥æœˆ",ling:"éˆæ˜",wafel:"å‰æ—¦é¤…",tianma:"å¤©ç¢¼"}[u]||u}}const Ze={class:"zigen-map-container"},Ae={key:0,class:"flex justify-center items-center py-8"},De={key:1,class:"flex justify-between items-center mb-4 px-5"},Me={key:0,class:"flex items-center space-x-4"},Ne={class:"flex items-center space-x-2"},Pe=["disabled","title"],qe={key:0},Be={key:1},Ke={class:"flex items-center space-x-2"},We=["title"],je={key:0},Ue={key:1},Re={key:0,class:"flex items-center space-x-2"},Ve=["title"],He={key:0},Ie={key:1},Oe={key:1,class:"flex items-center space-x-2"},Fe=["title"],Xe={key:0},Ge={key:1},Qe={class:"flex items-center space-x-2"},Ye=["title"],Je={key:0},et={key:1},tt={key:1,class:"flex items-center space-x-2"},st=["disabled","title"],ot={key:0},nt={key:1},lt=["title"],at={key:0},it={key:1},rt=["title"],ct={key:0},ut={key:1},dt={key:2,class:"mt-2 text-center"},pt={key:2,class:"keyboard-layout"},vt={class:"key-label"},ft=["onClick"],gt={class:"zigen-code"},mt={key:0,class:"more-indicator"},ht={key:1,class:"text-xs text-gray-400 no-zigen-text"},yt={key:0,class:"vertical-text zigen-font"},xt={key:1,class:"vertical-text zigen-font"},_t={key:2,class:"vertical-text zigen-font"},bt={key:3,class:"vertical-text zigen-font"},kt={key:4,class:"vertical-text zigen-font"},wt={key:5,class:"vertical-text zigen-font"},Ct={key:6,class:"vertical-text zigen-font"},St={key:7,class:"vertical-text single-line zigen-font"},zt={class:"mobile-key-label"},Et={key:0,class:"mobile-zigen-container"},Tt={class:"mobile-zigen-list text-indigo-800 dark:text-indigo-300"},Lt=["onClick"],$t={class:"zigen-code"},Zt={key:1,class:"mobile-no-zigen"},At={key:0,class:"mobile-key-desc zigen-font"},Dt={key:1,class:"mobile-key-desc zigen-font"},Mt={key:2,class:"mobile-key-desc zigen-font"},Nt={key:3,class:"mobile-key-desc"},Pt={key:4,class:"pinned-popup"},qt={class:"popup-container"},Bt={class:"popup-body"},Kt={class:"popup-header"},Wt={class:"popup-title"},jt={class:"zigen-rows text-indigo-800 dark:text-indigo-300"},Ut={class:"zigen-row-inline"},Rt={class:"zigen-header-inline current-zigen"},Vt={key:0,class:"example-chars-same-line"},Ht=["onClick","title"],It={key:1,class:"example-chars-same-line"},Ot={key:0,class:"pinyin-info"},Ft={class:"zigen-row-inline"},Xt={class:"zigen-header-inline other-zigen"},Gt={key:0,class:"example-chars-same-line"},Qt=["onClick","title"],Yt={key:1,class:"example-chars-same-line"},Jt={key:0,class:"pinyin-info"},ce=7,es=we({__name:"ZigenMap",props:{defaultScheme:{},columnMinWidth:{},zigenFontClass:{},alwaysVisibleZigens:{},alwaysRedZigens:{}},setup(pe){const u=pe,L=O(()=>u.zigenFontClass||"zigen-font"),A=O(()=>{if(u.alwaysVisibleZigens)return u.alwaysVisibleZigens;switch(B.value){default:return"å†«å·´ç”¨"}}),F=O(()=>{if(u.alwaysRedZigens)return u.alwaysRedZigens;switch(B.value){case"star":return"ä¸Šå°å£ã€€ä¸‰å…«éº»ç‰™ã€€åˆå°¤å°¢ç”±èˆŸè‰¹ã€€äººæ–‡äº†ä¸šå†Šã€€ä¸ƒå¿ƒè‡¼ã€€çŸ¢ä¸–åæ­¢è‡ªã€€ä¸å¤Šå¤‚é¬¥ã€€äºŒå„¿è€Œ";case"joy":return"å£";case"ling":return"";case"ming":return"";default:return""}}),se=ze(u,"columnMinWidth"),X=O(()=>`repeat(auto-fill, minmax(${se.value||"1.0rem"}, max-content))`),J=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l",";"],["z","x","c","v","b","n","m",",",".","/"]],k=["'"],b=w(!1),h=w(!1),C=w(!0),S=w(!1),D=w(!1),G=()=>{b.value=window.innerWidth<720},M=()=>{h.value=!h.value},q=()=>{C.value=!C.value},ee=()=>{S.value=!S.value},te=()=>{D.value=!D.value};ye(()=>{G(),window.addEventListener("resize",G)}),Ce(()=>{window.removeEventListener("resize",G)});const oe=O(()=>{const n=J.flat();return C.value?n.slice().sort((e,r)=>{const t=/^[a-zA-Z]$/.test(e),d=/^[a-zA-Z]$/.test(r);return t&&!d?-1:!t&&d?1:e.localeCompare(r)}):n}),ue=["joy","light","star","ming","wafel","ling"];function N(n){const e=ue.includes(n);return{zigenUrl:`/zigen-${n}.csv`,chaifenUrl:e?"/chaifen.json":`/chaifen-${n}.json`}}const B=O(()=>u.defaultScheme||"star"),T=w(),K=w(),U=w(!1),W=w(new Map),R=w(0),v=w(null),z=w(null),m=w({}),j=w(!1),$=w(new Set),g=w(!1),f=w("");xe(()=>u.defaultScheme,()=>{K.value=null,W.value.clear(),R.value=0,console.log("æ–¹æ¡ˆå·²åˆ‡æ›ï¼Œå·²æ¸…é™¤ä¾‹å­—ç·©å­˜")});const Z=O(()=>{var r;if(!T.value)return console.log("No zigenMap data"),{};console.log("ZigenMap has data, size:",T.value.size);const n={},e=[];for(const[t,d]of T.value){const l=d.font,c=(r=d.ma)==null?void 0:r.trim();if(!c||c.length===0||l==null)continue;const i=c[0].toLowerCase(),p=c.slice(1);e.push({font:l,ma:c,firstLetter:i,code:p})}console.log(`Found ${e.length} valid zigens`);for(let t=0;t<e.length;t++){const d=e[t],{font:l,ma:c,firstLetter:i,code:p}=d;n[i]||(n[i]={visible:[],hidden:[],all:[]});const y=t>0?e[t-1]:null,P=y&&y.code===p&&y.firstLetter===i,Y=n[i].visible.find(re=>re.code===p),de=A.value.includes(l);let V=!1;Y?P&&!de?(n[i].hidden.push({font:l,code:p}),V=!0):(n[i].visible.push({font:l,code:p}),V=!1):(n[i].visible.push({font:l,code:p}),V=!1),n[i].all.push({font:l,code:p,isHidden:V})}return console.log("Final result:",n),n}),ne=O(()=>{var r;if(!T.value)return{};const n={};for(const t of oe.value)n[t]=[];const e=[];for(const[t,d]of T.value){const l=d.font,c=(r=d.ma)==null?void 0:r.trim();if(!c||c.length===0||l==null)continue;const i=c[0].toLowerCase(),p=c.slice(1);e.push({font:l,ma:c,firstLetter:i,code:p})}S.value&&e.sort((t,d)=>t.firstLetter!==d.firstLetter?0:t.code.length!==d.code.length?t.code.length-d.code.length:0);for(let t=0;t<e.length;t++){const d=e[t],{font:l,ma:c,firstLetter:i,code:p}=d,y=t>0?e[t-1]:null,P=y&&y.code===p&&y.firstLetter===i,Y=n[i].find(re=>re.code===p&&!re.isHidden),de=A.value.includes(l);let V=!1;Y&&P&&!de?V=!0:V=!1,n[i].push({font:l,code:p,isHidden:V})}return n}),Q=async n=>{const e=n.normalize("NFC");let r=new Set;if(W.value.has(e))return r=W.value.get(e),console.log(`âœ… å¾ç·©å­˜ä¸­ç²å–å­—æ ¹ "${e}" çš„ä¾‹å­— ${r.size} å€‹`),Array.from(r).slice(0,ce);if(!K.value)return console.log("chaifenLoader æœªåˆå§‹åŒ–"),[];try{console.log(`é–‹å§‹ç‚ºå­—æ ¹ "${n}(${e})" æœç´¢ä¾‹å­—, cachedCheckedCount=${R.value}...`);const t=new Promise((i,p)=>{setTimeout(()=>p(new Error("æ•¸æ“šåŠ è¼‰è¶…æ™‚")),1e4)}),d=await Promise.race([K.value.loadData(),t]),l=Object.entries(d).slice(0,3);console.log("æ•¸æ“šæ¨£æœ¬:",l);let c=0;for(const[i,p]of Object.entries(d).slice(R.value)){c++;const y=p;if(c<=5&&console.log(`å­—ç¬¦ "${i}" çš„æ‹†åˆ†æ•¸æ“š:`,y.d),y.d){for(const P of y.d){W.value.has(P)||W.value.set(P,new Set);const Y=W.value.get(P);Y.size<20&&Y.add(i),P===e&&(r=Y,console.log(`âœ… æ‰¾åˆ°åŒ¹é…: "${i}" åŒ…å«å­—æ ¹ "${e}", æ‹†åˆ†: "${y.d}"`))}if(r.size>=20)break}c%1e3===0&&console.log(`å·²æª¢æŸ¥ ${c} å€‹å­—ç¬¦ï¼Œæ‰¾åˆ° ${r.size} å€‹ä¾‹å­—`)}return R.value+=c,console.log(`å­—æ ¹ "${e}" æœ€çµ‚æ‰¾åˆ°ä¾‹å­—:`,Array.from(r).slice(0,5),`(ç¸½å…±${r.size}å€‹)`),Array.from(r)}catch(t){return console.error("ç²å–ä¾‹å­—å¤±æ•—:",t),t instanceof Error&&t.message==="æ•¸æ“šåŠ è¼‰è¶…æ™‚"&&console.error("æ•¸æ“šåŠ è¼‰è¶…æ™‚ï¼Œè«‹æª¢æŸ¥ç¶²çµ¡é€£æ¥"),Array.from(r)}},ve=async n=>{const e=n.normalize("NFC");let r=new Set;if(!K.value)return console.log("chaifenLoader æœªåˆå§‹åŒ–"),[];try{console.log(`é–‹å§‹ç‚ºå­—æ ¹ "${n}" æœç´¢æ‰€æœ‰ä¾‹å­—...`);const t=new Promise((l,c)=>{setTimeout(()=>c(new Error("æ•¸æ“šåŠ è¼‰è¶…æ™‚")),3e4)}),d=await Promise.race([K.value.loadData(),t]);for(const[l,c]of Object.entries(d)){const i=c;i.d&&i.d.includes(e)&&r.add(l)}return console.log(`å­—æ ¹ "${e}" æ‰¾åˆ°æ‰€æœ‰ä¾‹å­—: ${r.size} å€‹`),Array.from(r)}catch(t){return console.error("ç²å–æ‰€æœ‰ä¾‹å­—å¤±æ•—:",t),Array.from(r)}};async function le(){U.value=!0;try{const n=N(B.value),e=await Te(n.zigenUrl);T.value=e,console.log("æˆ‘å°±çŸ¥é“ä½ æœƒå¿ä¸ä½æ‰“é–‹æ§åˆ¶è‡ºğŸ˜"),console.log(`å·²åŠ è¼‰å­—æ ¹æ•¸æ“šï¼Œæ–‡ä»¶: ${n.zigenUrl}`),console.log("æ³¨æ„ï¼šæ‹†åˆ†æ•¸æ“šå°‡åœ¨ç¬¬ä¸€æ¬¡é»æ“Šå­—æ ¹æ™‚æ‰åŠ è¼‰")}catch(n){console.error("åŠ è¼‰å­—æ ¹æ•¸æ“šå¤±æ•—:",n)}finally{U.value=!1}}function ae(n){switch(n){case";":return"æ¬¡é¸";case",":return"é€—è™Ÿ";case".":return"å¥è™Ÿ";default:return"æ— å­—æ ¹"}}async function fe(n,e){var c;if(n.stopPropagation(),!K.value){console.log("é»æ“Šæ™‚åˆå§‹åŒ–æ‹†åˆ†æ•¸æ“šåŠ è¼‰å™¨...");const i=N(B.value);K.value=Le.getInstance(i.chaifenUrl),console.log(`å·²åˆå§‹åŒ– ChaiDataLoaderï¼Œä½¿ç”¨æ–‡ä»¶: ${i.chaifenUrl}`)}if(j.value&&v.value===e.font){ie();return}v.value=e.font,j.value=!0;let r="";if(T.value){for(const[i,p]of T.value)if(p.font===e.font&&((c=p.ma)==null?void 0:c.slice(1))===e.code){r=p.ma;break}}const t=ke(e.font,r);z.value=t,console.log("é–‹å§‹ç²å–ä¾‹å­—ï¼Œå­—æ ¹æ•¸é‡:",[...t.visible,...t.hidden].length);const d={},l=[...t.visible,...t.hidden];for(const i of l){console.log(`æ­£åœ¨ç²å–å­—æ ¹ "${i.font}" çš„ä¾‹å­—...`);const p=await Q(i.font);console.log(`å­—æ ¹ "${i.font}" æ‰¾åˆ°ä¾‹å­—:`,p.length,"å€‹"),d[i.font]=p}m.value=d,console.log(`å›ºå®šå½ˆçª— - å­—æ ¹ "${e.font}" çš„æœ€çµ‚ä¾‹å­—:`,m.value)}function ie(){j.value=!1,v.value=null,z.value=null,m.value={},$.value.clear()}async function ge(n){var e;if($.value.has(n))$.value.delete(n);else if($.value.add(n),((e=m.value[n])==null?void 0:e.length)<=ce){console.log(`æ­£åœ¨åŠ è¼‰å­—æ ¹ "${n}" çš„æ‰€æœ‰ä¾‹å­—...`);const r=await ve(n);m.value[n]=r,console.log(`å·²åŠ è¼‰å­—æ ¹ "${n}" çš„ ${r.length} å€‹ä¾‹å­—`)}}async function me(){if(!g.value){g.value=!0,f.value="";try{const n=document.querySelector(".zigen-map-container");if(!n)throw new Error("æ‰¾ä¸åˆ°å­—æ ¹åœ–å®¹å™¨å…ƒç´ ");j.value&&ie(),await new Promise(t=>setTimeout(t,100));const e=be.getSchemeDisplayName(B.value),r=await be.exportZigenMapToPNG(n,e,h.value,{copyToClipboard:!1,download:!0,scale:3,addWatermark:!0});r.success?(f.value=r.message,setTimeout(()=>{f.value=""},3e3)):(f.value=r.message,setTimeout(()=>{f.value=""},5e3))}catch(n){console.error("å°å‡ºå­—æ ¹åœ–å¤±æ•—:",n),f.value=`å°å‡ºå¤±æ•—: ${n instanceof Error?n.message:"æœªçŸ¥éŒ¯èª¤"}`,setTimeout(()=>{f.value=""},5e3)}finally{g.value=!1}}}function he(n,e){return e&&F.value.includes(e)?!0:["ling","ming"].includes(B.value)?n.length===1:!1}function ke(n,e){var d,l;const r=[],t=[];if(!T.value||!e)return{visible:r,hidden:t};for(const[c,i]of T.value){const p=i.font,y=(d=i.ma)==null?void 0:d.trim(),P=(l=i.pinyin)==null?void 0:l.trim();!y||!p||p===null||p===void 0||y===e&&(p===n?r.unshift({font:p,code:y,pinyin:P}):t.push({font:p,code:y,pinyin:P}))}return{visible:r,hidden:t}}return xe(()=>B.value,le),ye(()=>{le(),document.addEventListener("click",n=>{if(j.value){const e=document.querySelector(".pinned-popup");e&&!e.contains(n.target)&&ie()}})}),(n,e)=>{var r;return o(),s("div",Ze,[U.value?(o(),s("div",Ae,[...e[0]||(e[0]=[a("div",{class:"loading loading-spinner loading-lg"},null,-1),a("span",{class:"ml-2"},"æ­£åœ¨åŠ è¼‰å­—æ ¹æ•¸æ“š...",-1)])])):E("",!0),U.value?E("",!0):(o(),s("div",De,[e[7]||(e[7]=a("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," é»æ“Šå­—æ ¹å¯æŸ¥çœ‹ä¾‹å­— ",-1)),b.value?E("",!0):(o(),s("div",Me,[a("div",Ne,[a("button",{onClick:me,class:x(["export-btn layout-toggle-btn",{"layout-toggle-active":g.value}]),disabled:g.value,title:g.value?"å°å‡ºä¸­...":"å°å‡ºå­—æ ¹åœ–"},[g.value?(o(),s("span",Be,"â³")):(o(),s("span",qe,"ğŸ“¸"))],10,Pe),f.value?(o(),s("span",{key:0,class:x(["text-xs",f.value.includes("å¤±æ•—")?"text-red-500":"text-green-500"])},_(f.value),3)):E("",!0)]),a("div",Ke,[e[1]||(e[1]=a("span",{class:"text-xs text-gray-400"},"ç·¨ç¢¼é•·åº¦",-1)),a("button",{onClick:ee,class:x(["layout-toggle-btn",{"layout-toggle-active":S.value}]),title:S.value?"æ¢å¾©åŸå§‹é †åº":"çŸ­ç·¨ç¢¼å„ªå…ˆï¼ˆ2ç¢¼â†’3ç¢¼ï¼‰"},[S.value?(o(),s("span",Ue,"ğŸ“")):(o(),s("span",je,"ğŸ”¢"))],10,We)]),h.value?(o(),s("div",Re,[e[2]||(e[2]=a("span",{class:"text-xs text-gray-400"},"æŒ‰éµæ’åº",-1)),a("button",{onClick:q,class:x(["layout-toggle-btn",{"layout-toggle-active":C.value}]),title:C.value?"åˆ‡æ›ç‚ºéµç›¤é †åº":"åˆ‡æ›ç‚ºå­—æ¯é †åº"},[C.value?(o(),s("span",He,"ğŸ”¤")):(o(),s("span",Ie,"âŒ¨ï¸"))],10,Ve)])):E("",!0),h.value?E("",!0):(o(),s("div",Oe,[e[3]||(e[3]=a("span",{class:"text-xs text-gray-400"},"é¡¯ç¤ºæ¨¡å¼",-1)),a("button",{onClick:te,class:x(["layout-toggle-btn",{"layout-toggle-active":D.value}]),title:D.value?"éš±è—é‡ç¢¼å­—æ ¹":"é¡¯ç¤ºæ‰€æœ‰å­—æ ¹"},[D.value?(o(),s("span",Ge,"ğŸ‘ï¸â€ğŸ—¨ï¸")):(o(),s("span",Xe,"ğŸ‘ï¸"))],10,Fe)])),a("div",Qe,[e[4]||(e[4]=a("span",{class:"text-xs text-gray-400"},"åˆ‡æ›åœ–è¡¨å½¢æ…‹",-1)),a("button",{onClick:M,class:x(["layout-toggle-btn",{"layout-toggle-active":h.value}]),title:h.value?"åˆ‡æ›ç‚ºç¶²æ ¼å¸ƒå±€":"åˆ‡æ›ç‚ºåˆ—è¡¨å¸ƒå±€"},[h.value?(o(),s("span",et,"âŠ")):(o(),s("span",Je,"â˜°"))],10,Ye)])])),b.value?(o(),s("div",tt,[a("button",{onClick:me,class:x(["export-btn layout-toggle-btn",{"layout-toggle-active":g.value}]),disabled:g.value,title:g.value?"å°å‡ºä¸­...":"å°å‡ºå­—æ ¹åœ–"},[g.value?(o(),s("span",nt,"â³")):(o(),s("span",ot,"ğŸ“¸"))],10,st),e[5]||(e[5]=a("span",{class:"text-xs text-gray-400"},"æŒ‰éµæ’åº",-1)),a("button",{onClick:q,class:x(["layout-toggle-btn",{"layout-toggle-active":C.value}]),title:C.value?"åˆ‡æ›ç‚ºéµç›¤é †åº":"åˆ‡æ›ç‚ºå­—æ¯é †åº"},[C.value?(o(),s("span",at,"ğŸ”¤")):(o(),s("span",it,"âŒ¨ï¸"))],10,lt),e[6]||(e[6]=a("span",{class:"text-xs text-gray-400"},"ç·¨ç¢¼é•·åº¦",-1)),a("button",{onClick:ee,class:x(["layout-toggle-btn",{"layout-toggle-active":S.value}]),title:S.value?"æ¢å¾©åŸå§‹é †åº":"çŸ­ç·¨ç¢¼å„ªå…ˆï¼ˆ2ç¢¼â†’3ç¢¼ï¼‰"},[S.value?(o(),s("span",ut,"ğŸ“")):(o(),s("span",ct,"ğŸ”¢"))],10,rt)])):E("",!0),b.value&&f.value?(o(),s("div",dt,[a("span",{class:x(["text-xs",f.value.includes("å¤±æ•—")?"text-red-500":"text-green-500"])},_(f.value),3)])):E("",!0)])),!U.value&&T.value&&!b.value&&!h.value?(o(),s("div",pt,[(o(),s(H,null,I(J,(t,d)=>a("div",{key:d,class:"keyboard-row"},[(o(!0),s(H,null,I(t,l=>{var c;return o(),s("div",{key:l,class:x(["keyboard-key",{"empty-key":k.includes(l)}])},[a("div",vt,_(l.toUpperCase()),1),!k.includes(l)&&((c=Z.value[l])==null?void 0:c.visible.length)>0?(o(),s("div",{key:0,class:"zigen-list text-indigo-800 dark:text-indigo-300",style:Se({gridTemplateColumns:X.value})},[(o(!0),s(H,null,I(S.value?[...D.value?Z.value[l].all:Z.value[l].all.filter(i=>!i.isHidden)].sort((i,p)=>i.code.length-p.code.length):D.value?Z.value[l].all:Z.value[l].all.filter(i=>!i.isHidden),(i,p)=>(o(),s("span",{key:p,class:x(["zigen-item",{"small-root-zigen":he(i.code,i.font)}]),onClick:y=>fe(y,i)},[a("span",{class:x(L.value)},_(i.font),3),a("span",gt,_(i.code),1)],10,ft))),128)),!D.value&&Z.value[l].hidden.length>0?(o(),s("span",mt,"â‹¯")):E("",!0)],4)):k.includes(l)?E("",!0):(o(),s("div",ht,[l==="/"?(o(),s("div",yt,[...e[8]||(e[8]=[a("div",null,"å¼•å°ç‰¹æ®Šç¬¦è™Ÿ",-1),a("div",null,"åˆ‡æ›å¤šé‡è¨»è§£",-1)])])):l==="z"?(o(),s("div",xt,[...e[9]||(e[9]=[a("div",null,"å¼•å°æ‹¼éŸ³åæŸ¥",-1),a("div",null,"å¼•å°æ­·å²è¼¸å…¥",-1)])])):l==="a"?(o(),s("div",_t,[...e[10]||(e[10]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€äº†",-1)])])):l==="e"?(o(),s("div",bt,[...e[11]||(e[11]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€çš„",-1)])])):l==="i"?(o(),s("div",kt,[...e[12]||(e[12]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€æ˜¯",-1)])])):l==="o"?(o(),s("div",wt,[...e[13]||(e[13]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€æˆ‘",-1)])])):l==="u"?(o(),s("div",Ct,[...e[14]||(e[14]=[a("div",null,null,-1),a("div",null,"ä¸€ç¢¼ä¸Šå±å­—ã€€ä¸",-1)])])):(o(),s("div",St,_(ae(l)),1))]))],2)}),128))])),64))])):E("",!0),!U.value&&T.value&&(b.value||h.value)?(o(),s("div",{key:3,class:x(["mobile-layout",{"desktop-list-layout":!b.value&&h.value}])},[(o(!0),s(H,null,I(oe.value,t=>{var d;return o(),s("div",{key:t,class:x(["mobile-key-row",{"empty-mobile-key":k.includes(t)}])},[a("div",zt,_(t.toUpperCase()),1),!k.includes(t)&&((d=ne.value[t])==null?void 0:d.length)>0?(o(),s("div",Et,[a("div",Tt,[(o(!0),s(H,null,I(ne.value[t],(l,c)=>(o(),s("span",{key:`sorted-${c}`,class:x(["mobile-zigen-item",{"mobile-hidden-zigen":l.isHidden,"mobile-small-root-zigen":!l.isHidden&&he(l.code,l.font)}]),onClick:i=>fe(i,l)},[a("span",{class:x(L.value)},_(l.font),3),a("span",$t,_(l.code),1)],10,Lt))),128))])])):k.includes(t)?E("",!0):(o(),s("div",Zt,[t==="/"?(o(),s("span",At,"å¼•å°ç‰¹æ®Šç¬¦è™Ÿ")):t==="z"?(o(),s("span",Dt,"å¼•å°æ‹¼éŸ³åæŸ¥")):["a","e","i","o","u"].includes(t)?(o(),s("span",Mt," ä¸€ç¢¼ä¸Šå±å­— ")):(o(),s("span",Nt,_(ae(t)),1))]))],2)}),128))],2)):E("",!0),j.value&&v.value&&z.value?(o(),s("div",Pt,[a("div",qt,[a("div",Bt,[a("div",Kt,[a("h3",Wt," ç·¨ç¢¼ "+_(((r=z.value.visible[0])==null?void 0:r.code)||v.value)+" ä¸Šçš„å­—æ ¹ ",1),a("button",{onClick:ie,class:"close-btn"},"âœ•")]),a("div",jt,[(o(!0),s(H,null,I(z.value.visible,(t,d)=>{var l;return o(),s("div",{key:`pinned-visible-${d}`,class:"zigen-row-wrapper"},[a("div",Ut,[a("div",Rt,[a("span",{class:x(L.value)},_(t.font),3)]),((l=m.value[t.font])==null?void 0:l.length)>0?(o(),s("div",Vt,[(o(!0),s(H,null,I($.value.has(t.font)?m.value[t.font]:m.value[t.font].slice(0,ce),c=>(o(),s("span",{key:c,class:"example-char zigen-font"},_(c),1))),128)),a("button",{onClick:_e(c=>ge(t.font),["stop"]),class:"example-char expand-btn",type:"button",title:$.value.has(t.font)?"æ”¶èµ·":"å±•é–‹é¡¯ç¤ºæ‰€æœ‰ä¾‹å­—"},_($.value.has(t.font)?"â–²":"â–¼"),9,Ht)])):(o(),s("div",It,[...e[15]||(e[15]=[a("span",{class:"loading-text"},"æ­£åœ¨åŠ è¼‰...",-1)])]))]),t.pinyin?(o(),s("div",Ot,_(t.pinyin),1)):E("",!0)])}),128)),(o(!0),s(H,null,I(z.value.hidden,(t,d)=>{var l;return o(),s("div",{key:`pinned-hidden-${d}`,class:"zigen-row-wrapper"},[a("div",Ft,[a("div",Xt,[a("span",{class:x(L.value)},_(t.font),3)]),((l=m.value[t.font])==null?void 0:l.length)>0?(o(),s("div",Gt,[(o(!0),s(H,null,I($.value.has(t.font)?m.value[t.font]:m.value[t.font].slice(0,ce),c=>(o(),s("span",{key:c,class:"example-char zigen-font"},_(c),1))),128)),a("button",{onClick:_e(c=>ge(t.font),["stop"]),class:"example-char expand-btn",type:"button",title:$.value.has(t.font)?"æ”¶èµ·":"å±•é–‹é¡¯ç¤ºæ‰€æœ‰ä¾‹å­—"},_($.value.has(t.font)?"â–²":"â–¼"),9,Qt)])):(o(),s("div",Yt,[...e[16]||(e[16]=[a("span",{class:"loading-text"},"æ­£åœ¨åŠ è¼‰...",-1)])]))]),t.pinyin?(o(),s("div",Jt,_(t.pinyin),1)):E("",!0)])}),128))])])])])):E("",!0)])}}}),ns=Ee(es,[["__scopeId","data-v-f3c86ddb"]]);export{ns as Z};
